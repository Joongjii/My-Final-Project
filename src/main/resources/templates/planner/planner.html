<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="main_layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <title>Planner</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="/css/planner/planner.css"/>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.6.1/sockjs.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
</head>


<body>
<div layout:fragment="content">

    <div class="container__contents">

        <div class="container__planner">

            <div style="display:none;" th:each="group : ${planner.travelGroup.participants}">
                <div th:text="${group.member.userId}">
            </div>

            <!-- 타이틀 -->
            <div class="wrapper__title">
                <div class="txt__title">
                    [[${planner.title}]]
                </div>
            </div>

            <!-- 독바 -->
            <div class="container__menu">

                <!-- 같이 여행가는 친구들 -->
                <div class="wrapper__friends">
                </div>

                <!-- 메뉴 -->
                <div class="wrapper__menu">
                    <!-- 나중에 주소 넣을때 사용 th:onclick="|location.href='@{/컨트롤러 주소}'|" -->
                    <button><img src="/img/btn_weather.png"></button>
                    <button><img src="/img/btn_live_chat.png"></button>
                    <button><img src="/img/btn_recommendation.png"></button>
                    <button><img src="/img/btn_planner.png"></button>
                    <button><img src="/img/btn_chatGPT.png"></button>
                    <button><img src="/img/btn_help.png"></button>
                </div>
            </div>

            <!-- 내용 -->
            <div class="container__plan">

                <!-- 계획 들어가는 박스 -->
                <div class="wrapper__plan">

                    <!-- 예산 박스 (고정) -->
                    <div class="wrapper__money">

                        <div class="money__title">
                            <div class="txt__money__title" style="margin-top: 10px">
                                예산 요약
                            </div>
                        </div>

                        <div class="wrapper__summary">

                            <!-- 총 예산 내역 (table)-->
                            <div class="summary">
                            </div>

                            <!-- 세부 내역 (table)-->
                            <div class="details">
                            </div>
                        </div>
                    </div>

                    <!-- 계획 박스 -->
                    <div class="container__kanban">

                        <div class="wrapper__planner__list" th:id= "wrapperPlannerList">

                            <div th:each="todolist, status : ${planner.todolistResponses}" th:id="|f${todolist.tlIdx}|" class="wrapper__date__box">
                                <div class="date">
                                    <div th:text="${todolist.title}" th:id="|tl${todolist.tlIdx}|"></div>
                                    <input type="text" readonly th:value="${todolist.tlIdx}" th:id="|tlidx${todolist.tlIdx}|"/>
                                    <input type="text" th:value="${todolist.title}" th:id="|tltitle${todolist.tlIdx}|"/>
                                    <button th:attr="data-tlidx=|${todolist.tlIdx}|" class="todolistmod">todolist 제목 수정</button>
                                    <button th:attr="data-tlidx=|${todolist.tlIdx}|" class="todolistdel">todolist 삭제</button>

                                </div>

                                <div th:id= "|plannerTodo${todolist.tlIdx}|">
                                    <div th:each="todo : ${todolist.todoResponses}" th:switch="${#strings.toString(todo.todoType)}" th:id="|d${todo.tdIdx}|" class="card">
                                        <div th:case="Accomodation">
                                            
                                                <p th:text="${todo.title}" th:id="|actitle${todo.tdIdx}|"/><p th:text="${todo.contents}" th:id="|accontents${todo.tdIdx}|"/>
                                                <p th:text="${todo.todoDate}" th:id="|actododate${todo.tdIdx}|"/><p th:text="${todo.isPrivate}" th:id="|acisPrivate${todo.tdIdx}|"/>
                                                <p th:text="${todo.acAddress}" th:id="|acaddress${todo.tdIdx}|"/>
                                                <input type="text" readonly th:value="${todo.tdIdx}" th:id="|tdidx${todo.tdIdx}|"/>
                                                <input type="text" th:value="${todo.title}" th:id="|actodotitlemod${todo.tdIdx}|"/>
                                                <input type="text" th:value="${todo.contents}" th:id="|actodocontentmod${todo.tdIdx}|"/>
                                                <input type="text" th:value="${todo.todoDate}" th:id="|actododatemod${todo.tdIdx}|"/>
                                                <input type="text" th:value="${todo.acAddress}" th:id="|actodoaddressmod${todo.tdIdx}|"/>
                                                <input type="checkbox" th:value="${todo.isPrivate}" th:id="|actodopvmod${todo.tdIdx}|"/>
                                                <button th:attr="data-tdidx=|${todo.tdIdx}|" class="actodomod">수정</button>
                                                <button th:attr="data-tdidx=|${todo.tdIdx}|" class="actododel">삭제</button>
                                            
                                        </div>

                                        <div th:case="Attractions">
                                            <p th:text="${todo.title}" th:id="|attitle${todo.tdIdx}|"/><p th:text="${todo.contents}" th:id="|atcontents${todo.tdIdx}|"/>
                                            <p th:text="${todo.todoDate}" th:id="|attododate${todo.tdIdx}|"/><p th:text="${todo.isPrivate}" th:id="|atisPrivate${todo.tdIdx}|"/>
                                            <p th:text="${todo.attractions}" th:id="|atattractions${todo.tdIdx}|"/>
                                            <input type="text" readonly th:value="${todo.tdIdx}" th:id="|tdidx${todo.tdIdx}|"/>
                                            <input type="text" th:value="${todo.title}" th:id="|attodotitlemod${todo.tdIdx}|"/>
                                            <input type="text" th:value="${todo.contents}" th:id="|attodocontentmod${todo.tdIdx}|"/>
                                            <input type="text" th:value="${todo.todoDate}" th:id="|attododatemod${todo.tdIdx}|"/>
                                            <input type="text" th:value="${todo.attractions}" th:id="|attodoinfomod${todo.tdIdx}|"/>
                                            <input type="checkbox" th:value="${todo.isPrivate}" th:id="|attodopvmod${todo.tdIdx}|"/>
                                            <button th:attr="data-tdidx=|${todo.tdIdx}|" class="attodomod">Attractions todo 수정</button>
                                            <button th:attr="data-tdidx=|${todo.tdIdx}|" class="attododel">삭제</button>
                                        </div>

                                        <div th:case="Budget">
                                            <p th:text="${todo.title}" th:id="|bgtitle${todo.tdIdx}|"/><p th:text="${todo.contents}" th:id="|bgcontents${todo.tdIdx}|"/>
                                            <p th:text="${todo.todoDate}" th:id="|bgtododate${todo.tdIdx}|"/><p th:text="${todo.isPrivate}" th:id="|bgisPrivate${todo.tdIdx}|"/>
                                            <p th:text="${todo.budgetType}" th:id="|bgbudgetType${todo.tdIdx}|"/><p th:text="${todo.budget}" th:id="|bgbudget${todo.tdIdx}|"/>
                                            <input type="text" readonly th:value="${todo.tdIdx}" th:id="|tdidx${todo.tdIdx}|"/>
                                            <input type="text" th:value="${todo.title}" th:id="|bgtodotitlemod${todo.tdIdx}|"/>
                                            <input type="text" th:value="${todo.contents}" th:id="|bgtodocontentmod${todo.tdIdx}|"/>
                                            <input type="text" th:value="${todo.todoDate}" th:id="|bgtododatemod${todo.tdIdx}|"/>
                                            <input type="text" th:value="${todo.budget}" th:id="|bgtodomoneymod${todo.tdIdx}|"/>
                                            <input type="text" th:value="${todo.budgetType}" th:id="|bgtodotypemod${todo.tdIdx}|"/>
                                            <input type="checkbox" th:value="${todo.isPrivate}" th:id="|bgtodopvmod${todo.tdIdx}|"/>
                                            <button th:attr="data-tdidx=|${todo.tdIdx}|" class="bgtodomod">수정</button>
                                            <button th:attr="data-tdidx=|${todo.tdIdx}|"class="bgtododel">삭제</button>
                                        </div>

                                        <div th:case="General">
                                            <p th:text="${todo.title}" th:id="|gntitle${todo.tdIdx}|"/><p th:text="${todo.contents}" th:id="|gncontents${todo.tdIdx}|"/>
                                            <p th:text="${todo.todoDate}" th:id="|gntododate${todo.tdIdx}|"/><p th:text="${todo.isPrivate}" th:id="|gnisPrivate${todo.tdIdx}|"/>
                                            <p th:text="${todo.gnAddress}" th:id="|gnaddress${todo.tdIdx}|"/>
                                            <input type="text" readonly th:value="${todo.tdIdx}" th:id="|tdidx${todo.tdIdx}|"/>
                                            <input type="text" th:value="${todo.title}" th:id="|gntodotitlemod${todo.tdIdx}|"/>
                                            <input type="text" th:value="${todo.contents}" th:id="|gntodocontentmod${todo.tdIdx}|"/>
                                            <input type="text" th:value="${todo.todoDate}" th:id="|gntododatemod${todo.tdIdx}|"/>
                                            <input type="text" th:value="${todo.gnAddress}" th:id="|gntodoaddressmod${todo.tdIdx}|"/>
                                            <input type="checkbox" th:value="${todo.isPrivate}" th:id="|gntodopvmod${todo.tdIdx}|"/>
                                            <button th:attr="data-tdidx=|${todo.tdIdx}|" class="gntodomod">General todo 수정</button>
                                            <button th:attr="data-tdidx=|${todo.tdIdx}|" class="gntododel">삭제</button>
                                        </div>

                                        <div th:case="Transport">
                                            <p th:text="${todo.title}" th:id="|trtitle${todo.tdIdx}|"/><p th:text="${todo.contents}" th:id="|trcontents${todo.tdIdx}|"/>
                                            <p th:text="${todo.todoDate}" th:id="|trtododate${todo.tdIdx}|"/><p th:text="${todo.isPrivate}" th:id="|trisPrivate${todo.tdIdx}|"/>
                                            <p th:text="${todo.transportType}" th:id="|trtransportType${todo.tdIdx}|"/>
                                            <input type="text" readonly th:value="${todo.tdIdx}" th:id="|tdidx${todo.tdIdx}|"/>
                                            <input type="text" th:value="${todo.title}" th:id="|trtodotitlemod${todo.tdIdx}|"/>
                                            <input type="text" th:value="${todo.contents}" th:id="|trtodocontentmod${todo.tdIdx}|"/>
                                            <input type="text" th:value="${todo.todoDate}" th:id="|trtododatemod${todo.tdIdx}|"/>
                                            <input type="text" th:value="${todo.transportType}" th:id="|trtodotypemod${todo.tdIdx}|"/>
                                            <input type="checkbox" th:value="${todo.isPrivate}" th:id="|trtodopvmod${todo.tdIdx}|"/>
                                            <button th:attr="data-tdidx=|${todo.tdIdx}|" class="trtodomod">Transport todo 수정</button>
                                            <button th:attr="data-tdidx=|${todo.tdIdx}|" class="trtododel">삭제</button>
                                        </div>
                                        
                                        
                                    </div>
                                
                                	<!-- 투두 카드 생기는 곳 -->
                                	<div th:id="'response' + ${todolist.tlIdx}"></div>
                                </div>

                                <!-- 버튼 클릭하면 카드 생성 (column) -->
                                <button class="open" th:onclick="addCard([[${todolist.tlIdx}]])" th:id="'addCardBtn' + ${todolist.tlIdx}" ></button>

                                <!-- 등록 -->
                                <div style="display: none; background-color: white" class="add__card" th:id="'addCard' + ${todolist.tlIdx}">

                                    <!-- 독바 -->
                                    <div class="wrapper__bar" th:id="'addWhat' + ${todolist.tlIdx}" >
                                        <button th:onclick="showAddTodo([[${todolist.tlIdx}]])" >
                                            <img src="/img/btn_todo.png">
                                        </button>
                                        <button th:onclick="showAddTransport([[${todolist.tlIdx}]])" >
                                            <img src="/img/btn_transport.png">
                                        </button>
                                        <button th:onclick="showAddAccommodation([[${todolist.tlIdx}]])" >
                                            <img src="/img/btn_accommodation.png">
                                        </button>
                                        <button th:onclick="showAddMap([[${todolist.tlIdx}]])" >
                                            <img src="/img/img_maps.png">
                                        </button>
                                        <button style="margin-right: 2px" th:onclick="showAddBudget([[${todolist.tlIdx}]])" >
                                            <img src="/img/btn_calculator.png">
                                        </button>
                                    </div>

                                    <div th:id="'addAccommodation' + ${todolist.tlIdx}">
                                        <input type="text" th:value="숙박제목1" th:id="|actodotitleadd${todolist.tlIdx}|"/>
                                        <input type="text" th:value="숙박내용1" th:id="|actodocontentadd${todolist.tlIdx}|"/>
                                        <input type="text" th:value="|2023-06-12T19:25|" th:id="|actododateadd${todolist.tlIdx}|"/>
                                        <input type="text" th:value="숙박주소1" th:id="|actodoaddressadd${todolist.tlIdx}|"/>
                                        <input type="checkbox" th:id="|actodopvadd${todolist.tlIdx}|"/>
                                        <button th:attr="data-tlidx=|${todolist.tlIdx}|" class="actodoadd">Accomodation todo 등록</button>
                                    </div>

                                    <div th:id="'addAttraction' + ${todolist.tlIdx}">
                                        <input type="text" th:value="관광지제목1" th:id="|attodotitleadd${todolist.tlIdx}|"/>
                                        <input type="text" th:value="관광지내용1" th:id="|attodocontentadd${todolist.tlIdx}|"/>
                                        <input type="text" th:value="|2023-06-12T19:25|" th:id="|attododateadd${todolist.tlIdx}|"/>
                                        <input type="text" th:value="관광지정보1" th:id="|attodoinfoadd${todolist.tlIdx}|"/>
                                        <input type="checkbox" th:id="|attodopvadd${todolist.tlIdx}|"/>
                                        <button th:attr="data-tlidx=|${todolist.tlIdx}|" class="attodoadd">Attractions todo 등록</button>
                                    </div>

                                    <div th:id="'addBudget' + ${todolist.tlIdx}">
                                        <input type="text" th:value="예산제목1" th:id="|bgtodotitleadd${todolist.tlIdx}|"/>
                                        <input type="text" th:value="예산내용1" th:id="|bgtodocontentadd${todolist.tlIdx}|"/>
                                        <input type="text" th:value="|2023-06-12T19:25|" th:id="|bgtododateadd${todolist.tlIdx}|"/>
                                        <input type="text" th:value="10000" th:id="|bgtodomoneyadd${todolist.tlIdx}|"/>
                                        <input type="text" th:value="FOOD" th:id="|bgtodotypeadd${todolist.tlIdx}|"/>
                                        <input type="checkbox" th:id="|bgtodopvadd${todolist.tlIdx}|"/>
                                        <button th:attr="data-tlidx=|${todolist.tlIdx}|" class="bgtodoadd">Budget todo 등록</button>
                                    </div>

                                    <div th:id="'addGeneral' + ${todolist.tlIdx}">
                                        <input type="text" th:value="일반제목1" th:id="|gntodotitleadd${todolist.tlIdx}|"/>
                                        <input type="text" th:value="일반내용1" th:id="|gntodocontentadd${todolist.tlIdx}|"/>
                                        <input type="text" th:value="|2023-06-12T19:25|" th:id="|gntododateadd${todolist.tlIdx}|"/>
                                        <input type="text" th:value="일반주소1" th:id="|gntodoaddressadd${todolist.tlIdx}|"/>
                                        <input type="checkbox" th:id="|gntodopvadd${todolist.tlIdx}|"/>
                                        <button th:attr="data-tlidx=|${todolist.tlIdx}|" class="gntodoadd">General todo 등록</button>
                                    </div>

                                    <div th:id="'addTrans' + ${todolist.tlIdx}">
                                        <input type="text" th:value="교통제목1" th:id="|trtodotitleadd${todolist.tlIdx}|"/>
                                        <input type="text" th:value="교통내용1" th:id="|trtodocontentadd${todolist.tlIdx}|"/>
                                        <input type="text" th:value="|2023-06-12T19:25|" th:id="|trtododateadd${todolist.tlIdx}|"/>
                                        <input type="text" th:value="AIRPLANE" th:id="|trtodotypeadd${todolist.tlIdx}|"/>
                                        <input type="checkbox" th:id="|trtodopvadd${todolist.tlIdx}|"/>
                                        <button th:attr="data-tlidx=|${todolist.tlIdx}|" class="trtodoadd">General todo 등록</button>
                                    </div>
                                </div>

                                <!-- 하루 총 예산 -->
                                <div th:id="|costPerDay${todolist.tlIdx}|"></div>

                            </div>

                            <div id="addDateResponse" ></div>

                            <div id="addDate">
                                <input type="text" th:value="제목없음" name="todolistTitleAdd" id="todolistTitleAdd"/>
                                <button th:onclick="addTodoList()"><span>todolist 등록</span></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="/js/jQuery-2.1.4.min.js"></script>
    <script type="text/javascript" layout:fragment="script" th:inline="javascript">

        // 그룹 인원외 읽기만 ===============================================================================================//

        window.onload = function() {

            notGroupReadOnly();
        }

        function notGroupReadOnly() {

            const group = [[${planner.travelGroup.participants}]]
            const myId = [[${#authentication.name}]]

            console.log('myId', myId)
            console.log(group)

            // !! => true, false 변환 위해 사용
            const isTravelGroup = !!(group || []) // 1
                .find((obj) => {
                    const userId = (obj.member || {}).userId || '' // 2
                    if (!userId) return false // 3
                    return userId === myId // 4
                })

            console.log('isTravelGroup', isTravelGroup)

            // 여행그룹이 아닌 사람은 읽기전용
            if (!isTravelGroup) {

                // 읽기 전용
                //$('input').prop('readonly', true);

                // 안보이게
                $('input').hide();
                $('.todolistmod').hide();
                $('.todolistdel').hide();
                $('.actodomod').hide();
                $('.actododel').hide();
                $('.attodomod').hide();
                $('.attododel').hide();
                $('.bgtodomod').hide();
                $('.bgtododel').hide();
                $('.gntodomod').hide();
                $('.gntododel').hide();
                $('.trtodomod').hide();
                $('.trtododel').hide();
                $('.open').hide();
                $('.add__card').hide();
                $('#addDate').hide();
            }
        }

        // 카드 추가창 ===============================================================================================//

        function addCard(str) {

            console.log(str);
            document.getElementById('addCard' + str).style.display = '';
            document.getElementById('addAccommodation' + str).style.display = 'none';
            document.getElementById('addAttraction' + str).style.display = 'none';
            document.getElementById('addBudget' + str).style.display = 'none';
            document.getElementById('addGeneral' + str).style.display = 'none';
            document.getElementById('addTrans' + str).style.display = 'none';
            document.getElementById('addCardBtn' + str).style.display = 'none';

        }

        function showAddTodo(str) {

            document.getElementById('addAccommodation' + str).style.display = 'none';
            document.getElementById('addAttraction' + str).style.display = 'none';
            document.getElementById('addBudget' + str).style.display = 'none';
            document.getElementById('addGeneral' + str).style.display = '';
            document.getElementById('addTrans' + str).style.display = 'none';
            document.getElementById('addCardBtn' + str).style.display = 'none';
        }

        function showAddTransport(str) {

            document.getElementById('addAccommodation' + str).style.display = 'none';
            document.getElementById('addAttraction' + str).style.display = 'none';
            document.getElementById('addBudget' + str).style.display = 'none';
            document.getElementById('addGeneral' + str).style.display = 'none';
            document.getElementById('addTrans' + str).style.display = '';
            document.getElementById('addCardBtn' + str).style.display = 'none';
        }

        function showAddAccommodation(str) {

            document.getElementById('addAccommodation' + str).style.display = '';
            document.getElementById('addAttraction' + str).style.display = 'none';
            document.getElementById('addBudget' + str).style.display = 'none';
            document.getElementById('addGeneral' + str).style.display = 'none';
            document.getElementById('addTrans' + str).style.display = 'none';
            document.getElementById('addCardBtn' + str).style.display = 'none';
        }

        function showAddMap(str) {

            document.getElementById('addAccommodation' + str).style.display = 'none';
            document.getElementById('addAttraction' + str).style.display = '';
            document.getElementById('addBudget' + str).style.display = 'none';
            document.getElementById('addGeneral' + str).style.display = 'none';
            document.getElementById('addTrans' + str).style.display = 'none';
            document.getElementById('addCardBtn' + str).style.display = 'none';
        }

        function showAddBudget(str) {

            document.getElementById('addAccommodation' + str).style.display = 'none';
            document.getElementById('addAttraction' + str).style.display = 'none';
            document.getElementById('addBudget' + str).style.display = '';
            document.getElementById('addGeneral' + str).style.display = 'none';
            document.getElementById('addTrans' + str).style.display = 'none';
            document.getElementById('addCardBtn' + str).style.display = 'none';
        }

        // 새로고침 ===================================================//

        function reload() {

            location.reload();
        }

        /* [start] 웹소켓 ============================================================================================== */

        var stompClient = null;
        
        var mIdx = 1;
        //모듈화
        function connect() {
            var socket = new SockJS('/gs-guide-websocket');

            stompClient= Stomp.over(socket);
            stompClient.connect({}, function (frame) {
                console.log('Connected: ' + frame);
                stompClient.subscribe('/topic/planner-message/' + [[${planner.tpIdx}]], function (recommand) {
                        res = JSON.parse(recommand.body);
                        console.log('res: '+res);
                        // 그룹추가
                        if(res.type === 'add-group'){
                           // response.innerHTML += '<span style="background:yellow">'+ res.msg.userId + '<br>'+'</span>';

                        }else if(res.type === 'upload-todolist'){
                        	
                            let dateResponse = document.getElementById("addDateResponse");
                            let wpl = document.getElementById("wrapperPlannerList");
                        	let todolist = document.createElement("div");
                        	todolist.id='f'+res.msg.tlIdx;
                        	todolist.className = "wrapper__date__box";
                        	wpl.insertBefore(todolist,dateResponse);
                        	
                        	let date = document.createElement("div");
                        	date.id ="date"+res.msg.tlIdx;
                        	date.className = "date";
                        	document.querySelector('#f'+res.msg.tlIdx).appendChild(date);
                        	
                        	let tl = document.createElement("div");
                        	tl.innerText= res.msg.title+" "+res.msg.tlIdx;
                        	tl.id = "tl"+res.msg.tlIdx;
                        	document.querySelector('#date'+res.msg.tlIdx).appendChild(tl);
                        	
                        	//todolist 제목
                        	let tltitle = document.createElement("input");
                        	tltitle.id = "tltitle"+res.msg.tlIdx;
                        	tltitle.value = res.msg.title;
                        	document.querySelector('#date'+res.msg.tlIdx).appendChild(tltitle);
                        	
                        	//todolist 수정
                        	let todolistmod = document.createElement("button");
                        	todolistmod.id = "todolistmod"+res.msg.tlIdx;
                        	todolistmod.className = "todolistmod";
                        	todolistmod.dataset.tlidx = res.msg.tlIdx;
                        	todolistmod.innerHTML= "todolist 제목 수정";
                        	document.querySelector('#date'+res.msg.tlIdx).appendChild(todolistmod);
                        	todolistmod.addEventListener('click', ev => {//
                        		let tlIdx = ev.target.dataset.tlidx;
                                console.log('tlIdx: '+tlIdx);

                                let todolistIdx = tlIdx;
                                let todolistTitle = document.getElementById('tltitle'+tlIdx).value;

                                console.log('todolistIdx: '+todolistIdx);
                                console.log('todolistTitle: '+todolistTitle);
								
                                stompClient.send("/app/modify-todolist/" + [[${planner.tpIdx}]], {}, JSON.stringify({'title':todolistTitle, 'tlIdx':todolistIdx}));
                                
                        	});
                        	//todolist 삭제
                        	let todolistdel = document.createElement("button");
                        	todolistdel.id = "todolistdel"+res.msg.tlIdx;
                        	todolistdel.className = "todolistdel";
                        	todolistdel.dataset.tlidx = res.msg.tlIdx;
                        	todolistdel.innerHTML= "todolist 삭제";
                        	document.querySelector('#date'+res.msg.tlIdx).appendChild(todolistdel);
                        	todolistdel.addEventListener('click', ev => {
                        		let tlIdx = ev.target.dataset.tlidx;
                                console.log('tlIdx: '+tlIdx);

                                let todolistIdx = tlIdx;

                                console.log('todolistIdx: '+todolistIdx);

                                stompClient.send("/app/remove-todolist/" + [[${planner.tpIdx}]], {}, JSON.stringify({'tlIdx':todolistIdx}));

                        	});
                        	
                        	//////////////
                        	//
                        	let plannerTodo = document.createElement("div");
                        	plannerTodo.id = "plannerTodo"+res.msg.tlIdx;
                        	document.querySelector('#f'+res.msg.tlIdx).appendChild(plannerTodo);
                        	/////////////////
                        	
                        	//todo 새로만들기 버튼
                        	let addcardbtn = document.createElement("button");
                        	addcardbtn.id="addCardBtn"+ res.msg.tlIdx;
                        	addcardbtn.className = "open";
                        	//addcardbtn.onclick=function(){addCard(res.msg.tlIdx);};
                        	addcardbtn.dataset.tlidx = res.msg.tlIdx;
                        	document.querySelector('#f'+res.msg.tlIdx).appendChild(addcardbtn);
                        	addcardbtn.addEventListener('click', ev => {
                        		let str = ev.target.dataset.tlidx;
                        		console.log('str: '+str);
                        		
                        		document.getElementById('addCard' + str).style.display = '';
                                document.getElementById('addAccommodation' + str).style.display = 'none';
                              	document.getElementById('addAttraction' + str).style.display = 'none';
                                document.getElementById('addBudget' + str).style.display = 'none';
                                document.getElementById('addGeneral' + str).style.display = 'none';
                                document.getElementById('addTrans' + str).style.display = 'none';
                                document.getElementById('addCardBtn' + str).style.display = 'none';
                        	});
                        	
                        	let addcard = document.createElement("div");
                        	addcard.id="addCard"+res.msg.tlIdx;
                        	addcard.className = "add__card";
                        	addcard.style.display = 'none';
                        	addcard.style.backgroundColor = "white";
                        	document.querySelector('#f'+res.msg.tlIdx).appendChild(addcard);
                        	
                        	let addwhat = document.createElement("div"); 
                        	addwhat.id="addWhat"+res.msg.tlIdx;
                        	addwhat.className = "wrapper__bar";
                        	document.querySelector('#addCard'+res.msg.tlIdx).appendChild(addwhat);
                        	
                        	
                        	//일반투두 버튼
                        	let showAddGn = document.createElement("button");
                        	showAddGn.id="showAddGeneral"+ res.msg.tlIdx;
                        	document.querySelector('#addWhat'+res.msg.tlIdx).appendChild(showAddGn);
                        	
                        	//일반투두 버튼 이미지
                        	let gnImg = document.createElement("img");
                        	gnImg.src = "/img/btn_todo.png"
                        	document.querySelector('#showAddGeneral'+res.msg.tlIdx).appendChild(gnImg);
                        	gnImg.dataset.tlidx = res.msg.tlIdx;
                        	gnImg.addEventListener('click', ev => {
                        		let str = ev.target.dataset.tlidx;
                        		console.log('str: '+str);
                        		
                        		document.getElementById('addAccommodation' + str).style.display = 'none';
                                document.getElementById('addAttraction' + str).style.display = 'none';
                                document.getElementById('addBudget' + str).style.display = 'none';
                                document.getElementById('addGeneral' + str).style.display = '';
                                document.getElementById('addTrans' + str).style.display = 'none';
                                document.getElementById('addCardBtn' + str).style.display = 'none';
                        	});
                        	
                        	//교통투두 버튼
                        	let showAddTr = document.createElement("button");
                        	showAddTr.id="showAddTransport"+ res.msg.tlIdx;
                        	document.querySelector('#addWhat'+res.msg.tlIdx).appendChild(showAddTr);
                        	
                        	//교통투두 버튼 이미지
                        	let trImg = document.createElement("img");
                        	trImg.src = "/img/btn_transport.png"
                        	document.querySelector('#showAddTransport'+res.msg.tlIdx).appendChild(trImg);
                        	trImg.dataset.tlidx = res.msg.tlIdx;
                        	trImg.addEventListener('click', ev => {
                        		let str = ev.target.dataset.tlidx;
                        		console.log('str: '+str);
                        		
                        		document.getElementById('addAccommodation' + str).style.display = 'none';
                                document.getElementById('addAttraction' + str).style.display = 'none';
                                document.getElementById('addBudget' + str).style.display = 'none';
                                document.getElementById('addGeneral' + str).style.display = 'none';
                                document.getElementById('addTrans' + str).style.display = '';
                                document.getElementById('addCardBtn' + str).style.display = 'none';
                        	});
                        	
                        	//숙박투두 버튼
                        	let showAddAc = document.createElement("button");
                        	showAddAc.id="showAddAccommodation"+ res.msg.tlIdx;
                        	//showAddAc.setAttribute("src", "/img/btn_accommodation.png");
                        	//showAddAc.dataset.tlidx = res.msg.tlIdx;
                        	//showAddAc.setAttribute("data-tlidx",res.msg.tlIdx);
                        	document.querySelector('#addWhat'+res.msg.tlIdx).appendChild(showAddAc);
                        	
                        	//숙박투두 버튼 이미지
                        	let acImg = document.createElement("img");
                        	acImg.src = "/img/btn_accommodation.png"
                        	document.querySelector('#showAddAccommodation'+res.msg.tlIdx).appendChild(acImg);
                        	acImg.dataset.tlidx = res.msg.tlIdx;
                        	acImg.addEventListener('click', ev => {
                        		let str = ev.target.dataset.tlidx;//왜 못받아 오는건지 알 수가 없다.
                        		console.log('str: '+str);
                        		
                        		document.getElementById('addAccommodation' + str).style.display = '';
                                document.getElementById('addAttraction' + str).style.display = 'none';
                                document.getElementById('addBudget' + str).style.display = 'none';
                                document.getElementById('addGeneral' + str).style.display = 'none';
                                document.getElementById('addTrans' + str).style.display = 'none';
                                document.getElementById('addCardBtn' + str).style.display = 'none';
                        	});
                        	
                        	//관광지투두 버튼
                        	let showAddAt = document.createElement("button");
                        	showAddAt.id="showAddAttractions"+ res.msg.tlIdx;
                        	document.querySelector('#addWhat'+res.msg.tlIdx).appendChild(showAddAt);
                        	
                        	//관광지투두 버튼 이미지
                        	let atImg = document.createElement("img");
                        	atImg.src = "/img/img_maps.png"
                        	document.querySelector('#showAddAttractions'+res.msg.tlIdx).appendChild(atImg);
                        	atImg.dataset.tlidx = res.msg.tlIdx;
                        	atImg.addEventListener('click', ev => {
                        		let str = ev.target.dataset.tlidx;
                        		console.log('str: '+str);
                        		
                        		document.getElementById('addAccommodation' + str).style.display = 'none';
                                document.getElementById('addAttraction' + str).style.display = '';
                                document.getElementById('addBudget' + str).style.display = 'none';
                                document.getElementById('addGeneral' + str).style.display = 'none';
                                document.getElementById('addTrans' + str).style.display = 'none';
                                document.getElementById('addCardBtn' + str).style.display = 'none';
                        	});
                        	
                        	//예산투두 버튼
                        	let showAddBg = document.createElement("button");
                        	showAddBg.id="showAddBudget"+ res.msg.tlIdx;
                        	document.querySelector('#addWhat'+res.msg.tlIdx).appendChild(showAddBg);
                        	
                        	//예산투두 버튼 이미지
                        	let bgImg = document.createElement("img");
                        	bgImg.src = "/img/btn_calculator.png"
                        	document.querySelector('#showAddBudget'+res.msg.tlIdx).appendChild(bgImg);
                        	bgImg.dataset.tlidx = res.msg.tlIdx;
                        	bgImg.addEventListener('click', ev => {
                        		let str = ev.target.dataset.tlidx;
                        		console.log('str: '+str);
                        		
                        		document.getElementById('addAccommodation' + str).style.display = 'none';
                                document.getElementById('addAttraction' + str).style.display = 'none';
                                document.getElementById('addBudget' + str).style.display = '';
                                document.getElementById('addGeneral' + str).style.display = 'none';
                                document.getElementById('addTrans' + str).style.display = 'none';
                                document.getElementById('addCardBtn' + str).style.display = 'none';
                        	});
                        	
                        	//숙박 todo 추가
                        	let addAc = document.createElement("div"); 
                        	addAc.id="addAccommodation"+res.msg.tlIdx;
                        	document.querySelector('#addCard'+res.msg.tlIdx).appendChild(addAc);
                        	
                        	let addAcTitle = document.createElement("input"); 
                        	addAcTitle.id="actodotitleadd"+res.msg.tlIdx;
                        	addAcTitle.nodeType = "text";
                        	addAcTitle.value = "숙박제목";
                        	document.querySelector('#addAccommodation'+res.msg.tlIdx).appendChild(addAcTitle);
                        	
                        	let addAcContent = document.createElement("input"); 
                        	addAcContent.id="actodocontentadd"+res.msg.tlIdx;
                        	addAcContent.nodeType = "text";
                        	addAcContent.value = "숙박내용";
                        	document.querySelector('#addAccommodation'+res.msg.tlIdx).appendChild(addAcContent);
                        	
                        	let addAcDate = document.createElement("input"); 
                        	addAcDate.id="actododateadd"+res.msg.tlIdx;
                        	addAcDate.setAttribute("type", "datetime-local");
                        	document.querySelector('#addAccommodation'+res.msg.tlIdx).appendChild(addAcDate);
                        	
                        	let addAcAddress = document.createElement("input"); 
                        	addAcAddress.id="actodoaddressadd"+res.msg.tlIdx;
                        	addAcAddress.nodeType = "text";
                        	addAcAddress.value = "숙박주소";
                        	document.querySelector('#addAccommodation'+res.msg.tlIdx).appendChild(addAcAddress);
                        	
                        	let addAcPv = document.createElement("input"); 
                        	addAcPv.id="actodopvadd"+res.msg.tlIdx;
                        	addAcPv.setAttribute("type", "checkbox");
                        	document.querySelector('#addAccommodation'+res.msg.tlIdx).appendChild(addAcPv);
                        	
                        	let addAcButton = document.createElement("button"); 
                        	addAcButton.id="actodoadd"+res.msg.tlIdx;
                        	addAcButton.className = "actodoadd";
                        	addAcButton.dataset.tlidx = res.msg.tlIdx;
                        	addAcButton.innerHTML= "Accomodation todo 등록";
                        	document.querySelector('#addAccommodation'+res.msg.tlIdx).appendChild(addAcButton);
                        	addAcButton.addEventListener('click', ev => {
                        		let tlIdx = ev.target.dataset.tlidx;
                                console.log('tlIdx: '+tlIdx);

                                let todolistIdx = tlIdx;
                                let actodotitle = document.getElementById('actodotitleadd'+tlIdx).value;
                                let actodocontent = document.getElementById('actodocontentadd'+tlIdx).value;
                                let actododate = document.getElementById('actododateadd'+tlIdx).value;
                                let actodoaddress = document.getElementById('actodoaddressadd'+tlIdx).value;
                                let actodoprivate = document.getElementById('actodopvadd'+tlIdx).checked;

                                console.log('todolistIdx: '+todolistIdx);
                                console.log('actodotitle: '+actodotitle);
                                console.log('actodocontent: '+actodocontent);
                                console.log('actododate: '+actododate);
                                console.log('actodoaddress: '+actodoaddress);
                                console.log('actodoprivate: '+actodoprivate);

                                stompClient.send("/app/upload-accomodation/" + [[${planner.tpIdx}]]+"/"+tlIdx, {},
                                    JSON.stringify({'title':actodotitle, 'contents':actodocontent, 'todoDate':actododate,
                                        'address':actodoaddress, 'isPrivate':actodoprivate}));
                        	});
                        	
                        	//관광지 todo 추가
                        	let addAt = document.createElement("div"); 
                        	addAt.id="addAttraction"+res.msg.tlIdx;
                        	document.querySelector('#addCard'+res.msg.tlIdx).appendChild(addAt);
                        	
                        	let addAtTitle = document.createElement("input"); 
                        	addAtTitle.id="attodotitleadd"+res.msg.tlIdx;
                        	addAtTitle.nodeType = "text";
                        	addAtTitle.value = "관광지제목";
                        	document.querySelector('#addAttraction'+res.msg.tlIdx).appendChild(addAtTitle);
                        	
                        	let addAtContent = document.createElement("input"); 
                        	addAtContent.id="attodocontentadd"+res.msg.tlIdx;
                        	addAtContent.nodeType = "text";
                        	addAtContent.value = "관광지내용";
                        	document.querySelector('#addAttraction'+res.msg.tlIdx).appendChild(addAtContent);
                        	
                        	let addAtDate = document.createElement("input"); 
                        	addAtDate.id="attododateadd"+res.msg.tlIdx;
                        	addAtDate.setAttribute("type", "datetime-local");
                        	document.querySelector('#addAttraction'+res.msg.tlIdx).appendChild(addAtDate);
                        	
                        	let addAtInfo = document.createElement("input"); 
                        	addAtInfo.id="attodoinfoadd"+res.msg.tlIdx;
                        	addAtInfo.nodeType = "text";
                        	addAtInfo.value = "관광지정보";
                        	document.querySelector('#addAttraction'+res.msg.tlIdx).appendChild(addAtInfo);
                        	
                        	let addAtPv = document.createElement("input"); 
                        	addAtPv.id="attodopvadd"+res.msg.tlIdx;
                        	addAtPv.setAttribute("type", "checkbox");
                        	document.querySelector('#addAttraction'+res.msg.tlIdx).appendChild(addAtPv);
                        	
                        	let addAtButton = document.createElement("button"); 
                        	addAtButton.id="attodoadd"+res.msg.tlIdx;
                        	addAtButton.className = "attodoadd";
                        	addAtButton.dataset.tlidx = res.msg.tlIdx;
                        	addAtButton.innerHTML= "Attractions todo 등록";
                        	document.querySelector('#addAttraction'+res.msg.tlIdx).appendChild(addAtButton);
                        	addAtButton.addEventListener('click', ev => {
                        		let tlIdx = ev.target.dataset.tlidx;
                                console.log('tlIdx: '+tlIdx);

                                let todolistIdx = document.getElementById('tlidx'+tlIdx).value;
                                let attodotitle = document.getElementById('attodotitleadd'+tlIdx).value;
                                let attodocontent = document.getElementById('attodocontentadd'+tlIdx).value;
                                let attododate = document.getElementById('attododateadd'+tlIdx).value;
                                let attodoinfo = document.getElementById('attodoinfoadd'+tlIdx).value;
                                let attodoprivate = document.getElementById('attodopvadd'+tlIdx).checked;

                                console.log('todolistIdx: '+todolistIdx);
                                console.log('attodotitle: '+attodotitle);
                                console.log('attodocontent: '+attodocontent);
                                console.log('attododate: '+attododate);
                                console.log('attodoinfo: '+attodoinfo);
                                console.log('attodoprivate: '+attodoprivate);

                                stompClient.send("/app/upload-attractions/" + [[${planner.tpIdx}]]+"/"+tlIdx, {},
                                    JSON.stringify({'title':attodotitle, 'contents':attodocontent, 'todoDate':attododate,
                                        'attractions':attodoinfo, 'isPrivate':attodoprivate}));
                        	});
                        	
                        	//예산 todo 추가
                        	let addBg = document.createElement("div"); 
                        	addBg.id="addBudget"+res.msg.tlIdx;
                        	document.querySelector('#addCard'+res.msg.tlIdx).appendChild(addBg);
                        	
                        	let addBgTitle = document.createElement("input"); 
                        	addBgTitle.id="bgtodotitleadd"+res.msg.tlIdx;
                        	addBgTitle.nodeType = "text";
                        	addBgTitle.value = "예산제목";
                        	document.querySelector('#addBudget'+res.msg.tlIdx).appendChild(addBgTitle);
                        	
                        	let addBgContent = document.createElement("input"); 
                        	addBgContent.id="bgtodocontentadd"+res.msg.tlIdx;
                        	addBgContent.nodeType = "text";
                        	addBgContent.value = "예산내용";
                        	document.querySelector('#addBudget'+res.msg.tlIdx).appendChild(addBgContent);
                        	
                        	let addBgDate = document.createElement("input"); 
                        	addBgDate.id="bgtododateadd"+res.msg.tlIdx;
                        	addBgDate.setAttribute("type", "datetime-local");
                        	document.querySelector('#addBudget'+res.msg.tlIdx).appendChild(addBgDate);
                        	
                        	let addBgBudget = document.createElement("input"); 
                        	addBgBudget.id="bgtodomoneyadd"+res.msg.tlIdx;
                        	addBgBudget.nodeType = "text";
                        	addBgBudget.value = "예산비용";//나중에 숫자만 들어가게
                        	document.querySelector('#addBudget'+res.msg.tlIdx).appendChild(addBgBudget);
                        	
                        	let addBgType = document.createElement("input"); 
                        	addBgType.id="bgtodotypeadd"+res.msg.tlIdx;
                        	addBgType.nodeType = "text";
                        	addBgType.value = "FOOD";//나중에 콤보박스나 라디오 버튼으로
                        	document.querySelector('#addBudget'+res.msg.tlIdx).appendChild(addBgType);
                        	
                        	let addBgPv = document.createElement("input"); 
                        	addBgPv.id="bgtodopvadd"+res.msg.tlIdx;
                        	addBgPv.setAttribute("type", "checkbox");
                        	document.querySelector('#addBudget'+res.msg.tlIdx).appendChild(addBgPv);
                        	
                        	let addBgButton = document.createElement("button"); 
                        	addBgButton.id="bgtodoadd"+res.msg.tlIdx;
                        	addBgButton.className = "bgtodoadd";
                        	addBgButton.dataset.tlidx = res.msg.tlIdx;
                        	addBgButton.innerHTML= "Budget todo 등록";
                        	document.querySelector('#addBudget'+res.msg.tlIdx).appendChild(addBgButton);
                        	addBgButton.addEventListener('click', ev => {
                        		let tlIdx = ev.target.dataset.tlidx;
                                console.log('tlIdx: '+tlIdx);

                                let todolistIdx = document.getElementById('tlidx'+tlIdx).value;
                                let bgtodotitle = document.getElementById('bgtodotitleadd'+tlIdx).value;
                                let bgtodocontent = document.getElementById('bgtodocontentadd'+tlIdx).value;
                                let bgtododate = document.getElementById('bgtododateadd'+tlIdx).value;
                                let bgtodomoney = document.getElementById('bgtodomoneyadd'+tlIdx).value;
                                let bgtodotype = document.getElementById('bgtodotypeadd'+tlIdx).value;
                                let bgtodoprivate = document.getElementById('bgtodopvadd'+tlIdx).checked;

                                console.log('todolistIdx: '+todolistIdx);
                                console.log('bgtodotitle: '+bgtodotitle);
                                console.log('bgtodocontent: '+bgtodocontent);
                                console.log('bgtododate: '+bgtododate);
                                console.log('bgtodomoney: '+bgtodomoney);
                                console.log('bgtodotype: '+bgtodotype);
                                console.log('bgtodoprivate: '+bgtodoprivate);

                                stompClient.send("/app/upload-budget/" + [[${planner.tpIdx}]]+"/"+tlIdx, {},
                                    JSON.stringify({'title':bgtodotitle, 'contents':bgtodocontent, 'todoDate':bgtododate,
                                        'budget':bgtodomoney, 'budgetType':bgtodotype, 'isPrivate':bgtodoprivate}));
                        	});
                        	
                        	//일반 todo 추가
                        	let addGn = document.createElement("div"); 
                        	addGn.id="addGeneral"+res.msg.tlIdx;
                        	document.querySelector('#addCard'+res.msg.tlIdx).appendChild(addGn);
                        	
                        	let addGnTitle = document.createElement("input"); 
                        	addGnTitle.id="gntodotitleadd"+res.msg.tlIdx;
                        	addGnTitle.nodeType = "text";
                        	addGnTitle.value = "일반제목";
                        	document.querySelector('#addGeneral'+res.msg.tlIdx).appendChild(addGnTitle);
                        	
                        	let addGnContent = document.createElement("input"); 
                        	addGnContent.id="gntodocontentadd"+res.msg.tlIdx;
                        	addGnContent.nodeType = "text";
                        	addGnContent.value = "일반내용";
                        	document.querySelector('#addGeneral'+res.msg.tlIdx).appendChild(addGnContent);
                        	
                        	let addGnDate = document.createElement("input"); 
                        	addGnDate.id="gntododateadd"+res.msg.tlIdx;
                        	addGnDate.setAttribute("type", "datetime-local");
                        	document.querySelector('#addGeneral'+res.msg.tlIdx).appendChild(addGnDate);
                        	
                        	let addGnAddress = document.createElement("input"); 
                        	addGnAddress.id="gntodoaddressadd"+res.msg.tlIdx;
                        	addGnAddress.nodeType = "text";
                        	addGnAddress.value = "일반주소";
                        	document.querySelector('#addGeneral'+res.msg.tlIdx).appendChild(addGnAddress);
                        	
                        	let addGnPv = document.createElement("input"); 
                        	addGnPv.id="gntodopvadd"+res.msg.tlIdx;
                        	addGnPv.setAttribute("type", "checkbox");
                        	document.querySelector('#addGeneral'+res.msg.tlIdx).appendChild(addGnPv);
                        	
                        	let addGnButton = document.createElement("button"); 
                        	addGnButton.id="gntodoadd"+res.msg.tlIdx;
                        	addGnButton.className = "gntodoadd";
                        	addGnButton.dataset.tlidx = res.msg.tlIdx;
                        	addGnButton.innerHTML= "General todo 등록";
                        	document.querySelector('#addGeneral'+res.msg.tlIdx).appendChild(addGnButton);
                        	addGnButton.addEventListener('click', ev => {
                        		let tlIdx = ev.target.dataset.tlidx;
                                console.log('tlIdx: '+tlIdx);

                                let todolistIdx = document.getElementById('tlidx'+tlIdx).value;
                                let gntodotitle = document.getElementById('gntodotitleadd'+tlIdx).value;
                                let gntodocontent = document.getElementById('gntodocontentadd'+tlIdx).value;
                                let gntododate = document.getElementById('gntododateadd'+tlIdx).value;
                                let gntodoaddress = document.getElementById('gntodoaddressadd'+tlIdx).value;
                                let gntodoprivate = document.getElementById('gntodopvadd'+tlIdx).checked;

                                console.log('todolistIdx: '+todolistIdx);
                                console.log('gntodotitle: '+gntodotitle);
                                console.log('gntodocontent: '+gntodocontent);
                                console.log('gntododate: '+gntododate);
                                console.log('gntodoaddress: '+gntodoaddress);
                                console.log('gntodoprivate: '+gntodoprivate);

                                stompClient.send("/app/upload-general/" + [[${planner.tpIdx}]]+"/"+tlIdx, {},
                                    JSON.stringify({'title':gntodotitle, 'contents':gntodocontent, 'todoDate':gntododate,
                                        'address':gntodoaddress, 'isPrivate':gntodoprivate}));
                        	});
                        	
                        	//교통 todo 추가
                        	let addTr = document.createElement("div"); 
                        	addTr.id="addTrans"+res.msg.tlIdx;
                        	document.querySelector('#addCard'+res.msg.tlIdx).appendChild(addTr);
                        	
                        	let addTrTitle = document.createElement("input"); 
                        	addTrTitle.id="trtodotitleadd"+res.msg.tlIdx;
                        	addTrTitle.nodeType = "text";
                        	addTrTitle.value = "교통제목";
                        	document.querySelector('#addTrans'+res.msg.tlIdx).appendChild(addTrTitle);
                        	
                        	let addTrContent = document.createElement("input"); 
                        	addTrContent.id="trtodocontentadd"+res.msg.tlIdx;
                        	addTrContent.nodeType = "text";
                        	addTrContent.value = "교통내용";
                        	document.querySelector('#addTrans'+res.msg.tlIdx).appendChild(addTrContent);
                        	
                        	let addTrDate = document.createElement("input"); 
                        	addTrDate.id="trtododateadd"+res.msg.tlIdx;
                        	addTrDate.setAttribute("type", "datetime-local");
                        	document.querySelector('#addTrans'+res.msg.tlIdx).appendChild(addTrDate);
                        	
                        	let addTrType = document.createElement("input"); 
                        	addTrType.id="trtodotypeadd"+res.msg.tlIdx;
                        	addTrType.nodeType = "text";
                        	addTrType.value = "AIRPLANE";
                        	document.querySelector('#addTrans'+res.msg.tlIdx).appendChild(addTrType);
                        	
                        	let addTrPv = document.createElement("input"); 
                        	addTrPv.id="trtodopvadd"+res.msg.tlIdx;
                        	addTrPv.setAttribute("type", "checkbox");
                        	document.querySelector('#addTrans'+res.msg.tlIdx).appendChild(addTrPv);
                        	
                        	let addTrButton = document.createElement("button"); 
                        	addTrButton.id="trtodoadd"+res.msg.tlIdx;
                        	addTrButton.className = "trtodoadd";
                        	addTrButton.dataset.tlidx = res.msg.tlIdx;
                        	addTrButton.innerHTML= "Transport todo 등록";
                        	document.querySelector('#addTrans'+res.msg.tlIdx).appendChild(addTrButton);
                        	addTrButton.addEventListener('click', ev => {
                        		let tlIdx = ev.target.dataset.tlidx;
                                console.log('tlIdx: '+tlIdx);

                                let todolistIdx = document.getElementById('tlidx'+tlIdx).value;
                                let trtodotitle = document.getElementById('trtodotitleadd'+tlIdx).value;
                                let trtodocontent = document.getElementById('trtodocontentadd'+tlIdx).value;
                                let trtododate = document.getElementById('trtododateadd'+tlIdx).value;
                                let trtodotype = document.getElementById('trtodotypeadd'+tlIdx).value;
                                let trtodoprivate = document.getElementById('trtodopvadd'+tlIdx).checked;

                                console.log('todolistIdx: '+todolistIdx);
                                console.log('trtodotitle: '+trtodotitle);
                                console.log('trtodocontent: '+trtodocontent);
                                console.log('trtododate: '+trtododate);
                                console.log('trtodotype: '+trtodotype);
                                console.log('trtodoprivate: '+trtodoprivate);

                                stompClient.send("/app/upload-transport/" + [[${planner.tpIdx}]]+"/"+tlIdx, {},
                                    JSON.stringify({'title':trtodotitle, 'contents':trtodocontent, 'todoDate':trtododate,
                                        'transportType':trtodotype, 'isPrivate':trtodoprivate}));
                        	});
                        	
                        	
                        }else if(res.type === 'modify-todolist'){

                            // 날짜 수정
                            console.log('res.msg.tlIdx: '+res.msg.tlIdx);
                            console.log('res.msg.title: '+res.msg.title);
                            // document.querySelector('#f'+res.msg.tlIdx).style.display='none';
                            //response.innerHTML += '<span style="background:yellow">'+ res.msg.title +'</span>';
                            document.getElementById('tl'+res.msg.tlIdx).innerHTML = res.msg.title;

                        }else if(res.type === 'remove-todolist'){

                            // 날짜 삭제
                            console.log('res.msg: '+res.msg);
                            document.querySelector('#f'+res.msg).style.display='none';

                        }else if(res.type === 'upload-accomodation'){

                        	// 숙박 추가
                        	console.log('res.tlIdx: ' + res.tlIdx);
                            console.log('res.msg.tdIdx: ' + res.msg.tdIdx);
                            console.log('res.msg.title: '+res.msg.title);
                            console.log('res.msg.contents: '+res.msg.contents);
                            console.log('res.msg.todoDate: '+res.msg.todoDate);
                            console.log('res.msg.address: '+res.msg.address);
                            console.log('res.msg.isPrivate: '+res.msg.isPrivate);
                            
                            
                        	let todoResponse = document.getElementById("response"+res.tlIdx);
                            let wpt = document.getElementById("plannerTodo"+res.tlIdx);
                            let todo = document.createElement("div");
                            todo.id='d'+res.msg.tdIdx;
                            todo.className = "card";
                            wpt.insertBefore(todo,todoResponse);
                               
                            let title = document.createElement("p"); 
                            title.id = "actitle"+res.msg.tdIdx;
                            title.innerHTML = res.msg.title;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(title);
                            
                            let contents = document.createElement("p"); 
                            contents.id = "accontents" + res.msg.tdIdx;
                            contents.innerHTML = res.msg.contents;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(contents);
                            
                            let todoDate = document.createElement("p"); 
                            todoDate.id = "actododate" + res.msg.tdIdx;
                            todoDate.innerHTML = res.msg.todoDate;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(todoDate);
                            
                            let acaddress = document.createElement("p"); 
                            acaddress.id = "acaddress" + res.msg.tdIdx;
                            acaddress.innerHTML = res.msg.address;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(acaddress);
                            
                            let isPrivate = document.createElement("p"); 
                            isPrivate.id = "acisPrivate"+ res.msg.tdIdx;
                            isPrivate.innerHTML = res.msg.isPrivate;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(isPrivate);
                            
                            let td = document.createElement("input");
                            td.id = "tdidx"+ res.msg.tdIdx;
                            td.nodeType = "text";
                            td.value = res.msg.tdIdx;
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(td);
                            
                            let titlemod = document.createElement("input");
                            titlemod.id = "actodotitlemod"+ res.msg.tdIdx;
                            titlemod.nodeType = "text";
                            titlemod.value = res.msg.title;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(titlemod);
                            
                            let contentsmod = document.createElement("input");
                            contentsmod.id = "actodocontentmod"+ res.msg.tdIdx;
                            contentsmod.nodeType = "text";
                            contentsmod.value = res.msg.contents;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(contentsmod);
                            
                            let todoDatemod = document.createElement("input");
                            todoDatemod.id = "actododatemod"+ res.msg.tdIdx;
                            todoDatemod.setAttribute("type", "datetime-local");
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(todoDatemod);
                            
                            let addressmod = document.createElement("input");
                            addressmod.id = "actodoaddressmod"+ res.msg.tdIdx;
                            addressmod.nodeType = "text";
                            addressmod.value = res.msg.address;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(addressmod);
                            
                            let isPrivatemod = document.createElement("input");
                            isPrivatemod.id = "actodopvmod"+ res.msg.tdIdx;
                            isPrivatemod.className = "check__box";
                            isPrivatemod.setAttribute("type", "checkbox");
                            if(res.msg.isPrivate){
                            	isPrivatemod.checked =true;
                            }else{
                            	isPrivatemod.checked =false;
                            }
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(isPrivatemod);
                            
                        	let acmodbutton = document.createElement("button");
                        	acmodbutton.id = "acmodbutton"+res.msg.tdIdx;
                        	acmodbutton.className = "actodomod";
                        	acmodbutton.dataset.tdidx = res.msg.tdIdx;
                        	acmodbutton.innerHTML= "수정";
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(acmodbutton);
                        	acmodbutton.addEventListener('click', ev => {
                        		let tdIdx = ev.target.dataset.tdidx;
                                console.log('tdIdx: '+tdIdx);

                                let actodoIdx = tdIdx;
                                let actodotitle = document.getElementById('actodotitlemod'+tdIdx).value;
                                let actodocontent = document.getElementById('actodocontentmod'+tdIdx).value;
                                let actododate = document.getElementById('actododatemod'+tdIdx).value;
                                let actodoaddress = document.getElementById('actodoaddressmod'+tdIdx).value;
                                let actodoprivate = document.getElementById('actodopvmod'+tdIdx).checked;

                                console.log('actodoIdx: '+actodoIdx);
                                console.log('actodotitle: '+actodotitle);
                                console.log('actodocontent: '+actodocontent);
                                console.log('actododate: '+actododate);
                                console.log('actodoaddress: '+actodoaddress);
                                console.log('actodoprivate: '+actodoprivate);

                                stompClient.send("/app/modify-accomodation/" + [[${planner.tpIdx}]], {},
                                    JSON.stringify({'tdIdx':actodoIdx, 'title':actodotitle, 'contents':actodocontent, 'todoDate':actododate,
                                        'address':actodoaddress, 'isPrivate':actodoprivate}));

                            });
                        	
                        	let acdelbutton = document.createElement("button");
                        	acdelbutton.id = "acdelbutton"+res.msg.tdIdx;
                        	acdelbutton.className = "actododel";
                        	acdelbutton.dataset.tdidx = res.msg.tdIdx;
                        	acdelbutton.innerHTML= "삭제";
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(acdelbutton);
                        	acdelbutton.addEventListener('click', ev => {
                                let tdIdx = ev.target.dataset.tdidx;
                                console.log('tdIdx: '+tdIdx);

                                let actodoIdx = document.getElementById('tdidx'+tdIdx).value;

                                console.log('actodoIdx: '+actodoIdx);

                                stompClient.send("/app/remove-accomodation/" + [[${planner.tpIdx}]], {},
                                    JSON.stringify({'tdIdx':actodoIdx }));

                            });
                        	

                        }else if(res.type === 'modify-accomodation'){

                            // 숙박 수정
                            console.log('res.msg.title: '+res.msg.title);
                            console.log('res.msg.contents: '+res.msg.contents);
                            console.log('res.msg.todoDate: '+res.msg.todoDate);
                            console.log('res.msg.address: '+res.msg.address);
                            console.log('res.msg.isPrivate: '+res.msg.isPrivate);
                            
                            document.getElementById("actitle"+res.msg.tdIdx).innerHTML = res.msg.title;
                            document.getElementById("accontents" + res.msg.tdIdx).innerHTML = res.msg.contents;
                            document.getElementById("actododate"+res.msg.tdIdx).innerHTML = res.msg.todoDate;
                            document.getElementById("acaddress"+res.msg.tdIdx).innerHTML = res.msg.address;
                            if(res.msg.isPrivate){
                            	document.getElementById("acisPrivate"+res.msg.tdIdx).checked =true;
                            }else{
                            	document.getElementById("acisPrivate"+res.msg.tdIdx).checked =false;
                            }
                            
                            document.getElementById("tdidx"+res.msg.tdIdx).value = res.msg.tdIdx;
                            document.getElementById("actodotitlemod"+res.msg.tdIdx).value = res.msg.title;
                            document.getElementById("actodocontentmod"+res.msg.tdIdx).value = res.msg.contents;
                            document.getElementById("actodoaddressmod"+res.msg.tdIdx).value = res.msg.address;
                            if(res.msg.isPrivate){
                            	document.getElementById("actodopvmod"+res.msg.tdIdx).checked =true;
                            }else{
                            	document.getElementById("actodopvmod"+res.msg.tdIdx).checked =false;
                            }
                            

                            //let id = 'd'+res.msg.tdIdx;
                            //document.getElementById(id).innerHTML =
                                //'<span style="background:yellow">'+ "숙박todo 제목, 내용, 날짜, 주소, 비밀: " + res.msg.title + " ,  " +res.msg.contents +
                               // res.msg.todoDate + " ,  " +res.msg.address + " ,  " +res.msg.isPrivate+ '<br>'+'</span>'
                            

                        }else if(res.type === 'remove-accomodation'){

                            //숙박 삭제
                            console.log('res.msg: '+res.msg);
                            document.querySelector('#d'+res.msg).style.display='none';


                        }else if(res.type === 'upload-attractions'){

                            // 관광지 추가
                            console.log('res.msg.title: '+res.msg.title);
                            console.log('res.msg.contents: '+res.msg.contents);
                            console.log('res.msg.todoDate: '+res.msg.todoDate);
                            console.log('res.msg.attractions: '+res.msg.attractions);
                            console.log('res.msg.isPrivate: '+res.msg.isPrivate);

                            
                            let todoResponse = document.getElementById("response"+res.tlIdx);
                            let wpt = document.getElementById("plannerTodo"+res.tlIdx);
                            let todo = document.createElement("div");
                            todo.id='d'+res.msg.tdIdx;
                            todo.className = "card";
                            wpt.insertBefore(todo,todoResponse);
                            
                            let title = document.createElement("p"); 
                            title.id = "attitle"+res.msg.tdIdx;
                            title.innerHTML = res.msg.title;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(title);
                            
                            let contents = document.createElement("p"); 
                            contents.id = "atcontents" + res.msg.tdIdx;
                            contents.innerHTML = res.msg.contents;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(contents);
                            
                            let todoDate = document.createElement("p"); 
                            todoDate.id = "attododate" + res.msg.tdIdx;
                            todoDate.innerHTML = res.msg.todoDate;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(todoDate);
                            
                            let info = document.createElement("p"); 
                            info.id = "atattractions" + res.msg.tdIdx;
                            info.innerHTML = res.msg.attractions;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(info);
                            
                            let isPrivate = document.createElement("p"); 
                            isPrivate.id = "atisPrivate"+ res.msg.tdIdx;
                            isPrivate.innerHTML = res.msg.isPrivate;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(isPrivate);
                            
                            let td = document.createElement("input");
                            td.id = "tdidx"+ res.msg.tdIdx;
                            td.nodeType = "text";
                            td.value = res.msg.tdIdx;
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(td);
                            
                            let titlemod = document.createElement("input");
                            titlemod.id = "attodotitlemod"+ res.msg.tdIdx;
                            titlemod.nodeType = "text";
                            titlemod.value = res.msg.title;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(titlemod);
                            
                            let contentsmod = document.createElement("input");
                            contentsmod.id = "attodocontentmod"+ res.msg.tdIdx;
                            contentsmod.nodeType = "text";
                            contentsmod.value = res.msg.contents;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(contentsmod);
                            
                            let todoDatemod = document.createElement("input");
                            todoDatemod.id = "attododatemod"+ res.msg.tdIdx;
                            todoDatemod.setAttribute("type", "datetime-local");
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(todoDatemod);
                            
                            let infomod = document.createElement("input");
                            infomod.id = "attodoinfomod"+ res.msg.tdIdx;
                            infomod.nodeType = "text";
                            infomod.value = res.msg.address;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(infomod);
                            
                            let isPrivatemod = document.createElement("input");
                            isPrivatemod.id = "attodopvmod"+ res.msg.tdIdx;
                            isPrivatemod.className = "check__box";
                            isPrivatemod.setAttribute("type", "checkbox");
                            if(res.msg.isPrivate){
                            	isPrivatemod.checked =true;
                            }else{
                            	isPrivatemod.checked =false;
                            }
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(isPrivatemod);
                            
                        	let atmodbutton = document.createElement("button");
                        	atmodbutton.id = "attodomod"+res.msg.tdIdx;
                        	atmodbutton.className = "attodomod";
                        	atmodbutton.dataset.tdidx = res.msg.tdIdx;
                        	atmodbutton.innerHTML= "수정";
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(atmodbutton);
                        	atmodbutton.addEventListener('click', ev => {
                        		let tdIdx = ev.target.dataset.tdidx;
                                console.log('tdIdx: '+tdIdx);
                                
                                let attodoIdx = document.getElementById('tdidx'+tdIdx).value;
                                let attodotitle = document.getElementById('attodotitlemod'+tdIdx).value;
                                let attodocontent = document.getElementById('attodocontentmod'+tdIdx).value;
                                let attododate = document.getElementById('attododatemod'+tdIdx).value;
                                let attodoinfo = document.getElementById('attodoinfomod'+tdIdx).value;
                                let attodoprivate = document.getElementById('attodopvmod'+tdIdx).checked;

                                console.log('attodoIdx: '+attodoIdx);
                                console.log('attodotitle: '+attodotitle);
                                console.log('attodocontent: '+attodocontent);
                                console.log('attododate: '+attododate);
                                console.log('attodoinfo: '+attodoinfo);
                                console.log('attodoprivate: '+attodoprivate);

                                stompClient.send("/app/modify-attractions/" + [[${planner.tpIdx}]], {},
                                    JSON.stringify({'tdIdx':attodoIdx, 'title':attodotitle, 'contents':attodocontent, 'todoDate':attododate,
                                        'attractions':attodoinfo, 'isPrivate':attodoprivate}));

                            });
                        	
                        	let atdelbutton = document.createElement("button");
                        	atdelbutton.id = "attododel"+res.msg.tdIdx;
                        	atdelbutton.className = "attododel";
                        	atdelbutton.dataset.tdidx = res.msg.tdIdx;
                        	atdelbutton.innerHTML= "삭제";
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(atdelbutton);
                        	atdelbutton.addEventListener('click', ev => {
                        		let tdIdx = ev.target.dataset.tdidx;
                                console.log('tdIdx: '+tdIdx);

                                let attodoIdx = document.getElementById('tdidx'+tdIdx).value;

                                console.log('attodoIdx: '+attodoIdx);

                                stompClient.send("/app/remove-attractions/" + [[${planner.tpIdx}]], {},
                                    JSON.stringify({'tdIdx':attodoIdx }));

                            });

                        }else if(res.type === 'modify-attractions'){

                            // 관광지 수정
                            console.log('res.msg.title: '+res.msg.title);
                            console.log('res.msg.contents: '+res.msg.contents);
                            console.log('res.msg.todoDate: '+res.msg.todoDate);
                            console.log('res.msg.attractions: '+res.msg.attractions);
                            console.log('res.msg.isPrivate: '+res.msg.isPrivate);
                            
                            document.getElementById("attitle"+res.msg.tdIdx).innerHTML = res.msg.title;
                            document.getElementById("atcontents" + res.msg.tdIdx).innerHTML = res.msg.contents;
                            document.getElementById("attododate"+res.msg.tdIdx).innerHTML = res.msg.todoDate;
                            document.getElementById("atattractions"+res.msg.tdIdx).innerHTML = res.msg.attractions;
                            if(res.msg.isPrivate){
                            	document.getElementById("acisPrivate"+res.msg.tdIdx).checked =true;
                            }else{
                            	document.getElementById("acisPrivate"+res.msg.tdIdx).checked =false;
                            }

                            document.getElementById("tdidx"+res.msg.tdIdx).value = res.msg.tdIdx;
                            document.getElementById("attodotitlemod"+res.msg.tdIdx).value = res.msg.title;
                            document.getElementById("attodocontentmod"+res.msg.tdIdx).value = res.msg.contents;
                            document.getElementById("attodoinfomod"+res.msg.tdIdx).value = res.msg.attractions;
                            if(res.msg.isPrivate){
                            	document.getElementById("attodopvmod"+res.msg.tdIdx).checked =true;
                            }else{
                            	document.getElementById("attodopvmod"+res.msg.tdIdx).checked =false;
                            }
                            
                        }else if(res.type === 'remove-attractions'){

                            // 관광지 삭제
                            console.log('res.msg: '+res.msg);
                            document.querySelector('#d'+res.msg).style.display='none';

                        }else if(res.type === 'upload-budget'){

                            // 예산 추가
                            console.log('res.msg.title:', res.msg.title);
                            console.log('res.msg.contents: '+res.msg.contents);
                            console.log('res.msg.todoDate: '+res.msg.todoDate);
                            console.log('res.msg.budget: '+res.msg.budget);
                            console.log('res.msg.budgetType: '+res.msg.budgetType);
                            console.log('res.msg.isPrivate: '+res.msg.isPrivate);


                            let todoResponse = document.getElementById("response"+res.tlIdx);
                            let wpt = document.getElementById("plannerTodo"+res.tlIdx);
                            let todo = document.createElement("div");
                            todo.id='d'+res.msg.tdIdx;
                            todo.className = "card";
                            wpt.insertBefore(todo,todoResponse);
                            
                            let title = document.createElement("p"); 
                            title.id = "bgtitle"+res.msg.tdIdx;
                            title.innerHTML = res.msg.title;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(title);
                            
                            let contents = document.createElement("p"); 
                            contents.id = "bgcontents" + res.msg.tdIdx;
                            contents.innerHTML = res.msg.contents;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(contents);
                            
                            let todoDate = document.createElement("p"); 
                            todoDate.id = "bgtododate" + res.msg.tdIdx;
                            todoDate.innerHTML = res.msg.todoDate;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(todoDate);
                            
                            let budgetType = document.createElement("p"); 
                            budgetType.id = "bgbudgetType" + res.msg.tdIdx;
                            budgetType.innerHTML = res.msg.budgetType;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(budgetType);
                            
                            let budget = document.createElement("p"); 
                            budget.id = "bgbudget" + res.msg.tdIdx;
                            budget.innerHTML = res.msg.budget;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(budget);
                            
                            let isPrivate = document.createElement("p"); 
                            isPrivate.id = "bgisPrivate"+ res.msg.tdIdx;
                            isPrivate.innerHTML = res.msg.isPrivate;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(isPrivate);
                            
                            let td = document.createElement("input");
                            td.id = "tdidx"+ res.msg.tdIdx;
                            td.nodeType = "text";
                            td.value = res.msg.tdIdx;
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(td);
                            
                            let titlemod = document.createElement("input");
                            titlemod.id = "bgtodotitlemod"+ res.msg.tdIdx;
                            titlemod.nodeType = "text";
                            titlemod.value = res.msg.title;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(titlemod);
                            
                            let contentsmod = document.createElement("input");
                            contentsmod.id = "bgtodocontentmod"+ res.msg.tdIdx;
                            contentsmod.nodeType = "text";
                            contentsmod.value = res.msg.contents;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(contentsmod);
                            
                            let todoDatemod = document.createElement("input");
                            todoDatemod.id = "bgtododatemod"+ res.msg.tdIdx;
                            todoDatemod.setAttribute("type", "datetime-local");
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(todoDatemod);
                            
                            let typemod = document.createElement("input");
                            typemod.id = "bgtodotypemod"+ res.msg.tdIdx;
                            typemod.nodeType = "text";
                            typemod.value = res.msg.budgetType;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(typemod);
                            
                            let moneymod = document.createElement("input");
                            moneymod.id = "bgtodomoneymod"+ res.msg.tdIdx;
                            moneymod.nodeType = "text";
                            moneymod.value = res.msg.budget;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(moneymod);
                            
                            let isPrivatemod = document.createElement("input");
                            isPrivatemod.id = "bgtodopvmod"+ res.msg.tdIdx;
                            isPrivatemod.className = "check__box";
                            isPrivatemod.setAttribute("type", "checkbox");
                            if(res.msg.isPrivate){
                            	isPrivatemod.checked =true;
                            }else{
                            	isPrivatemod.checked =false;
                            }
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(isPrivatemod);
                            
                        	let modbutton = document.createElement("button");
                        	modbutton.id = "bgtodomod"+res.msg.tdIdx;
                        	modbutton.className = "bgtodomod";
                        	modbutton.dataset.tdidx = res.msg.tdIdx;
                        	modbutton.innerHTML= "수정";
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(modbutton);
                        	modbutton.addEventListener('click', ev => {
                        		let tdIdx = ev.target.dataset.tdidx;
                                console.log('tdIdx: '+tdIdx);

                                let bgtodoIdx = document.getElementById('tdidx'+tdIdx).value;
                                let bgtodotitle = document.getElementById('bgtodotitlemod'+tdIdx).value;
                                let bgtodocontent = document.getElementById('bgtodocontentmod'+tdIdx).value;
                                let bgtododate = document.getElementById('bgtododatemod'+tdIdx).value;
                                let bgtodomoney = document.getElementById('bgtodomoneymod'+tdIdx).value;
                                let bgtodotype = document.getElementById('bgtodotypemod'+tdIdx).value;
                                let bgtodoprivate = document.getElementById('bgtodopvmod'+tdIdx).checked;

                                console.log('bgtodoIdx: '+bgtodoIdx);
                                console.log('bgtodotitle: '+bgtodotitle);
                                console.log('bgtodocontent: '+bgtodocontent);
                                console.log('bgtododate: '+bgtododate);
                                console.log('bgtodomoney: '+bgtodomoney);
                                console.log('bgtodotype: '+bgtodotype);
                                console.log('bgtodoprivate: '+bgtodoprivate);

                                stompClient.send("/app/modify-budget/" + [[${planner.tpIdx}]], {},
                                    JSON.stringify({'tdIdx':bgtodoIdx, 'title':bgtodotitle, 'contents':bgtodocontent, 'todoDate':bgtododate,
                                        'budget':bgtodomoney, 'budgetType':bgtodotype, 'isPrivate':bgtodoprivate}));
                            });
                        	
                        	let delbutton = document.createElement("button");
                        	delbutton.id = "bgtododel"+res.msg.tdIdx;
                        	delbutton.className = "bgtododel";
                        	delbutton.dataset.tdidx = res.msg.tdIdx;
                        	delbutton.innerHTML= "삭제";
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(delbutton);
                        	delbutton.addEventListener('click', ev => {
                        		let tdIdx = ev.target.dataset.tdidx;
                                console.log('tdIdx: '+tdIdx);

                                let bgtodoIdx = document.getElementById('tdidx'+tdIdx).value;

                                console.log('bgtodoIdx: '+bgtodoIdx);

                                stompClient.send("/app/remove-budget/" + [[${planner.tpIdx}]], {},
                                    JSON.stringify({'tdIdx':bgtodoIdx }));

                            });

                        }else if(res.type === 'modify-budget'){

                            // 예산 수정
                            console.log('res.msg.title: '+res.msg.title);
                            console.log('res.msg.contents: '+res.msg.contents);
                            console.log('res.msg.todoDate: '+res.msg.todoDate);
                            console.log('res.msg.address: '+res.msg.address);
                            console.log('res.msg.isPrivate: '+res.msg.isPrivate);
                            
                            
                            document.getElementById("bgtitle"+res.msg.tdIdx).innerHTML = res.msg.title;
                            document.getElementById("bgcontents" + res.msg.tdIdx).innerHTML = res.msg.contents;
                            document.getElementById("bgtododate"+res.msg.tdIdx).innerHTML = res.msg.todoDate;
                            document.getElementById("bgbudgetType"+res.msg.tdIdx).innerHTML = res.msg.budgetType;
                            document.getElementById("bgbudget"+res.msg.tdIdx).innerHTML = res.msg.budget;
                            
                            if(res.msg.isPrivate){
                            	document.getElementById("bgisPrivate"+res.msg.tdIdx).checked =true;
                            }else{
                            	document.getElementById("bgisPrivate"+res.msg.tdIdx).checked =false;
                            }

                            document.getElementById("tdidx"+res.msg.tdIdx).value = res.msg.tdIdx;
                            document.getElementById("bgtodotitlemod"+res.msg.tdIdx).value = res.msg.title;
                            document.getElementById("bgtodocontentmod"+res.msg.tdIdx).value = res.msg.contents;
                            document.getElementById("bgtodotypemod"+res.msg.tdIdx).value = res.msg.budgetType;
                            document.getElementById("bgtodomoneymod"+res.msg.tdIdx).value = res.msg.budget;
                            if(res.msg.isPrivate){
                            	document.getElementById("bgtodopvmod"+res.msg.tdIdx).checked =true;
                            }else{
                            	document.getElementById("bgtodopvmod"+res.msg.tdIdx).checked =false;
                            }

                        }else if(res.type === 'remove-budget'){

                            // 예산 삭제
                            console.log('res.msg: '+res.msg);
                            document.querySelector('#d'+res.msg).style.display='none';

                        }else if(res.type === 'upload-general'){

                            // 일반 투두 추가
                            console.log('res.msg.title: '+res.msg.title);
                            console.log('res.msg.contents: '+res.msg.contents);
                            console.log('res.msg.todoDate: '+res.msg.todoDate);
                            console.log('res.msg.address: '+res.msg.address);
                            console.log('res.msg.isPrivate: '+res.msg.isPrivate);

                            let todoResponse = document.getElementById("response"+res.tlIdx);
                            let wpt = document.getElementById("plannerTodo"+res.tlIdx);
                            let todo = document.createElement("div");
                            todo.id='d'+res.msg.tdIdx;
                            todo.className = "card";
                            wpt.insertBefore(todo,todoResponse);
                            
                            let title = document.createElement("p"); 
                            title.id = "gntitle"+res.msg.tdIdx;
                            title.innerHTML = res.msg.title;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(title);
                            
                            let contents = document.createElement("p"); 
                            contents.id = "gncontents" + res.msg.tdIdx;
                            contents.innerHTML = res.msg.contents;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(contents);
                            
                            let todoDate = document.createElement("p"); 
                            todoDate.id = "gntododate" + res.msg.tdIdx;
                            todoDate.innerHTML = res.msg.todoDate;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(todoDate);
                            
                            let address = document.createElement("p"); 
                            address.id = "gnaddress" + res.msg.tdIdx;
                            address.innerHTML = res.msg.address;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(address);
                            
                            let isPrivate = document.createElement("p"); 
                            isPrivate.id = "gnisPrivate"+ res.msg.tdIdx;
                            isPrivate.innerHTML = res.msg.isPrivate;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(isPrivate);
                            
                            let td = document.createElement("input");
                            td.id = "tdidx"+ res.msg.tdIdx;
                            td.nodeType = "text";
                            td.value = res.msg.tdIdx;
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(td);
                            
                            let titlemod = document.createElement("input");
                            titlemod.id = "gntodotitlemod"+ res.msg.tdIdx;
                            titlemod.nodeType = "text";
                            titlemod.value = res.msg.title;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(titlemod);
                            
                            let contentsmod = document.createElement("input");
                            contentsmod.id = "gntodocontentmod"+ res.msg.tdIdx;
                            contentsmod.nodeType = "text";
                            contentsmod.value = res.msg.contents;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(contentsmod);
                            
                            let todoDatemod = document.createElement("input");
                            todoDatemod.id = "gntododatemod"+ res.msg.tdIdx;
                            todoDatemod.setAttribute("type", "datetime-local");
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(todoDatemod);
                            
                            let addressmod = document.createElement("input");
                            addressmod.id = "gntodoaddressmod"+ res.msg.tdIdx;
                            addressmod.nodeType = "text";
                            addressmod.value = res.msg.address;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(addressmod);
                            
                            let isPrivatemod = document.createElement("input");
                            isPrivatemod.id = "gntodopvmod"+ res.msg.tdIdx;
                            isPrivatemod.className = "check__box";
                            isPrivatemod.setAttribute("type", "checkbox");
                            if(res.msg.isPrivate){
                            	isPrivatemod.checked =true;
                            }else{
                            	isPrivatemod.checked =false;
                            }
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(isPrivatemod);
                            
                        	let modbutton = document.createElement("button");
                        	modbutton.id = "gntodomod"+res.msg.tdIdx;
                        	modbutton.className = "gntodomod";
                        	modbutton.dataset.tdidx = res.msg.tdIdx;
                        	modbutton.innerHTML= "수정";
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(modbutton);
                        	modbutton.addEventListener('click', ev => {
                        		let tdIdx = ev.target.dataset.tdidx;
                                console.log('tdIdx: '+tdIdx);

                                let bgtodoIdx = document.getElementById('tdidx'+tdIdx).value;
                                let bgtodotitle = document.getElementById('bgtodotitlemod'+tdIdx).value;
                                let bgtodocontent = document.getElementById('bgtodocontentmod'+tdIdx).value;
                                let bgtododate = document.getElementById('bgtododatemod'+tdIdx).value;
                                let bgtodomoney = document.getElementById('bgtodomoneymod'+tdIdx).value;
                                let bgtodotype = document.getElementById('bgtodotypemod'+tdIdx).value;
                                let bgtodoprivate = document.getElementById('bgtodopvmod'+tdIdx).checked;

                                console.log('bgtodoIdx: '+bgtodoIdx);
                                console.log('bgtodotitle: '+bgtodotitle);
                                console.log('bgtodocontent: '+bgtodocontent);
                                console.log('bgtododate: '+bgtododate);
                                console.log('bgtodomoney: '+bgtodomoney);
                                console.log('bgtodotype: '+bgtodotype);
                                console.log('bgtodoprivate: '+bgtodoprivate);

                                stompClient.send("/app/modify-budget/" + [[${planner.tpIdx}]], {},
                                    JSON.stringify({'tdIdx':bgtodoIdx, 'title':bgtodotitle, 'contents':bgtodocontent, 'todoDate':bgtododate,
                                        'budget':bgtodomoney, 'budgetType':bgtodotype, 'isPrivate':bgtodoprivate}));

                            });
                        	
                        	let delbutton = document.createElement("button");
                        	delbutton.id = "gntododel"+res.msg.tdIdx;
                        	delbutton.className = "gntododel";
                        	delbutton.dataset.tdidx = res.msg.tdIdx;
                        	delbutton.innerHTML= "삭제";
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(delbutton);
                        	delbutton.addEventListener('click', ev => {
                        		let tdIdx = ev.target.dataset.tdidx;
                                console.log('tdIdx: '+tdIdx);

                                let gntodoIdx = document.getElementById('tdidx'+tdIdx).value;

                                console.log('gntodoIdx: '+gntodoIdx);

                                stompClient.send("/app/remove-general/" + [[${planner.tpIdx}]], {},
                                    JSON.stringify({'tdIdx':gntodoIdx }));

                            });

                        }else if(res.type === 'modify-general'){

                            // 일반 투두 수정
                            console.log('res.msg.title: '+res.msg.title);
                            console.log('res.msg.contents: '+res.msg.contents);
                            console.log('res.msg.todoDate: '+res.msg.todoDate);
                            console.log('res.msg.address: '+res.msg.address);
                            console.log('res.msg.isPrivate: '+res.msg.isPrivate);
                            
                            document.getElementById("gntitle"+res.msg.tdIdx).innerHTML = res.msg.title;
                            document.getElementById("gncontents" + res.msg.tdIdx).innerHTML = res.msg.contents;
                            document.getElementById("gntododate"+res.msg.tdIdx).innerHTML = res.msg.todoDate;
                            document.getElementById("gnaddress"+res.msg.tdIdx).innerHTML = res.msg.address;
                            
                            if(res.msg.isPrivate){
                            	document.getElementById("gnisPrivate"+res.msg.tdIdx).checked =true;
                            }else{
                            	document.getElementById("gnisPrivate"+res.msg.tdIdx).checked =false;
                            }

                            document.getElementById("tdidx"+res.msg.tdIdx).value = res.msg.tdIdx;
                            document.getElementById("gntodotitlemod"+res.msg.tdIdx).value = res.msg.title;
                            document.getElementById("gntodocontentmod"+res.msg.tdIdx).value = res.msg.contents;
                            document.getElementById("gntodoaddressmod"+res.msg.tdIdx).value = res.msg.address;
                            if(res.msg.isPrivate){
                            	document.getElementById("gntodopvmod"+res.msg.tdIdx).checked =true;
                            }else{
                            	document.getElementById("gntodopvmod"+res.msg.tdIdx).checked =false;
                            }
                            
                        }else if(res.type === 'remove-general'){

                            // 일반 투두 제거
                            console.log('res.msg: '+res.msg);
                            document.querySelector('#d'+res.msg).style.display='none';


                        }else if(res.type === 'upload-transport'){

                            // 교통 추가
                            console.log('res.msg.title: '+res.msg.title);
                            console.log('res.msg.contents: '+res.msg.contents);
                            console.log('res.msg.todoDate: '+res.msg.todoDate);
                            console.log('res.msg.transportType: '+res.msg.transportType);
                            console.log('res.msg.isPrivate: '+res.msg.isPrivate);

                            let todoResponse = document.getElementById("response"+res.tlIdx);
                            let wpt = document.getElementById("plannerTodo"+res.tlIdx);
                            let todo = document.createElement("div");
                            todo.id='d'+res.msg.tdIdx;
                            todo.className = "card";
                            wpt.insertBefore(todo,todoResponse);
                            
                            let title = document.createElement("p"); 
                            title.id = "trtitle"+res.msg.tdIdx;
                            title.innerHTML = res.msg.title;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(title);
                            
                            let contents = document.createElement("p"); 
                            contents.id = "trcontents" + res.msg.tdIdx;
                            contents.innerHTML = res.msg.contents;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(contents);
                            
                            let todoDate = document.createElement("p"); 
                            todoDate.id = "trtododate" + res.msg.tdIdx;
                            todoDate.innerHTML = res.msg.todoDate;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(todoDate);
                            
                            let type = document.createElement("p"); 
                            type.id = "trtransportType" + res.msg.tdIdx;
                            type.innerHTML = res.msg.transportType;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(type);
                            
                            let isPrivate = document.createElement("p"); 
                            isPrivate.id = "trisPrivate"+ res.msg.tdIdx;
                            isPrivate.innerHTML = res.msg.isPrivate;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(isPrivate);
                            
                            let td = document.createElement("input");
                            td.id = "tdidx"+ res.msg.tdIdx;
                            td.nodeType = "text";
                            td.value = res.msg.tdIdx;
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(td);
                            
                            let titlemod = document.createElement("input");
                            titlemod.id = "trtodotitlemod"+ res.msg.tdIdx;
                            titlemod.nodeType = "text";
                            titlemod.value = res.msg.title;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(titlemod);
                            
                            let contentsmod = document.createElement("input");
                            contentsmod.id = "trtodocontentmod"+ res.msg.tdIdx;
                            contentsmod.nodeType = "text";
                            contentsmod.value = res.msg.contents;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(contentsmod);
                            
                            let todoDatemod = document.createElement("input");
                            todoDatemod.id = "trtododatemod"+ res.msg.tdIdx;
                            todoDatemod.setAttribute("type", "datetime-local");
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(todoDatemod);
                            
                            let typemod = document.createElement("input");
                            typemod.id = "trtodotypemod"+ res.msg.tdIdx;
                            typemod.nodeType = "text";
                            typemod.value = res.msg.transportType;
                            document.querySelector('#d'+res.msg.tdIdx).appendChild(typemod);
                            
                            let isPrivatemod = document.createElement("input");
                            isPrivatemod.id = "trtodopvmod"+ res.msg.tdIdx;
                            isPrivatemod.className = "check__box";
                            isPrivatemod.setAttribute("type", "checkbox");
                            if(res.msg.isPrivate){
                            	isPrivatemod.checked =true;
                            }else{
                            	isPrivatemod.checked =false;
                            }
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(isPrivatemod);
                            
                        	let modbutton = document.createElement("button");
                        	modbutton.id = "trtodomod"+res.msg.tdIdx;
                        	modbutton.className = "trtodomod";
                        	modbutton.dataset.tdidx = res.msg.tdIdx;
                        	modbutton.innerHTML= "수정";
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(modbutton);
                        	modbutton.addEventListener('click', ev => {
                        		let tdIdx = ev.target.dataset.tdidx;
                                console.log('tdIdx: '+tdIdx);

                                let trtodoIdx = document.getElementById('tdidx'+tdIdx).value;
                                let trtodotitle = document.getElementById('trtodotitlemod'+tdIdx).value;
                                let trtodocontent = document.getElementById('trtodocontentmod'+tdIdx).value;
                                let trtododate = document.getElementById('trtododatemod'+tdIdx).value;
                                let trtodotype = document.getElementById('trtodotypemod'+tdIdx).value;
                                let trtodoprivate = document.getElementById('trtodopvmod'+tdIdx).checked;

                                console.log('trtodoIdx: '+trtodoIdx);
                                console.log('trtodotitle: '+trtodotitle);
                                console.log('trtodocontent: '+trtodocontent);
                                console.log('trtododate: '+trtododate);
                                console.log('trtodotype: '+trtodotype);
                                console.log('trtodoprivate: '+trtodoprivate);

                                stompClient.send("/app/modify-transport/" + [[${planner.tpIdx}]], {},
                                    JSON.stringify({'tdIdx':trtodoIdx, 'title':trtodotitle, 'contents':trtodocontent, 'todoDate':trtododate,
                                        'transportType':trtodotype, 'isPrivate':trtodoprivate}));

                            });
                        	
                        	let delbutton = document.createElement("button");
                        	delbutton.id = "trtododel"+res.msg.tdIdx;
                        	delbutton.className = "trtododel";
                        	delbutton.dataset.tdidx = res.msg.tdIdx;
                        	delbutton.innerHTML= "삭제";
                        	document.querySelector('#d'+res.msg.tdIdx).appendChild(delbutton);
                        	delbutton.addEventListener('click', ev => {
                        		let tdIdx = ev.target.dataset.tdidx;
                                console.log('tdIdx: '+tdIdx);

                                let trtodoIdx = document.getElementById('tdidx'+tdIdx).value;

                                console.log('trtodoIdx: '+trtodoIdx);

                                stompClient.send("/app/remove-transport/" + [[${planner.tpIdx}]], {},
                                    JSON.stringify({'tdIdx':trtodoIdx }));

                            });

                        }else if(res.type === 'modify-transport'){

                            // 교통 수정
                            console.log('res.msg.title: '+res.msg.title);
                            console.log('res.msg.contents: '+res.msg.contents);
                            console.log('res.msg.todoDate: '+res.msg.todoDate);
                            console.log('res.msg.transportType: '+res.msg.transportType);
                            console.log('res.msg.isPrivate: '+res.msg.isPrivate);
                            
                            document.getElementById("trtitle"+res.msg.tdIdx).innerHTML = res.msg.title;
                            document.getElementById("trcontents" + res.msg.tdIdx).innerHTML = res.msg.contents;
                            document.getElementById("trtododate"+res.msg.tdIdx).innerHTML = res.msg.todoDate;
                            document.getElementById("trtransportType"+res.msg.tdIdx).innerHTML = res.msg.transportType;
                            
                            if(res.msg.isPrivate){
                            	document.getElementById("trisPrivate"+res.msg.tdIdx).checked =true;
                            }else{
                            	document.getElementById("trisPrivate"+res.msg.tdIdx).checked =false;
                            }

                            document.getElementById("tdidx"+res.msg.tdIdx).value = res.msg.tdIdx;
                            document.getElementById("trtodotitlemod"+res.msg.tdIdx).value = res.msg.title;
                            document.getElementById("trtodocontentmod"+res.msg.tdIdx).value = res.msg.contents;
                            document.getElementById("trtodotypemod"+res.msg.tdIdx).value = res.msg.transportType;
                            if(res.msg.isPrivate){
                            	document.getElementById("trtodopvmod"+res.msg.tdIdx).checked =true;
                            }else{
                            	document.getElementById("trtodopvmod"+res.msg.tdIdx).checked =false;
                            }
                            
                        }else if(res.type === 'remove-transport'){

                            // 교통 삭제
                            console.log('res.msg: '+res.msg);
                            document.querySelector('#d'+res.msg).style.display='none';
                        }

                    }
                );
            });

        }

        function modTodoListDisconnect() {
            if (stompClient !== null) {
                stompClient.disconnect();
            }
            console.log("Disconnected");

        }

        //공유 인원 추가
        function addGroup() {

            let newUserId = newUser.value;
            stompClient.send("/app/add-group/" + [[${planner.tpIdx}]], {}, JSON.stringify({'newUserId':newUserId}));

        }

        //투두리스트 추가
        function addTodoList() {
            let title = todolistTitleAdd.value;
            console.dir(title);
            stompClient.send("/app/upload-todolist/" + [[${planner.tpIdx}]], {}, JSON.stringify({'title':title}));

        }

        //투두리스트 수정

        document.querySelectorAll('.todolistmod').forEach(e => {
            e.addEventListener('click', ev => {

                let tlIdx = ev.target.dataset.tlidx;
                console.log('tlIdx: '+tlIdx);

                let todolistIdx = document.getElementById('tlidx'+tlIdx).value;
                let todolistTitle = document.getElementById('tltitle'+tlIdx).value;

                console.log('todolistIdx: '+todolistIdx);
                console.log('todolistTitle: '+todolistTitle);

                stompClient.send("/app/modify-todolist/" + [[${planner.tpIdx}]], {}, JSON.stringify({'title':todolistTitle, 'tlIdx':todolistIdx}));

            });

        })

        //투두리스트 삭제

        document.querySelectorAll('.todolistdel').forEach(e => {
            e.addEventListener('click', ev => {

                let tlIdx = ev.target.dataset.tlidx;
                console.log('tlIdx: '+tlIdx);

                let todolistIdx = document.getElementById('tlidx'+tlIdx).value;

                console.log('todolistIdx: '+todolistIdx);

                stompClient.send("/app/remove-todolist/" + [[${planner.tpIdx}]], {}, JSON.stringify({'tlIdx':todolistIdx}));

            });

        })

        //숙박투두카드 추가

        document.querySelectorAll('.actodoadd').forEach(e => {
            e.addEventListener('click', ev => {

                let tlIdx = ev.target.dataset.tlidx;
                console.log('tlIdx: '+tlIdx);

                let todolistIdx = document.getElementById('tlidx'+tlIdx).value;
                let actodotitle = document.getElementById('actodotitleadd'+tlIdx).value;
                let actodocontent = document.getElementById('actodocontentadd'+tlIdx).value;
                let actododate = document.getElementById('actododateadd'+tlIdx).value;
                let actodoaddress = document.getElementById('actodoaddressadd'+tlIdx).value;
                let actodoprivate = document.getElementById('actodopvadd'+tlIdx).checked;

                console.log('todolistIdx: '+todolistIdx);
                console.log('actodotitle: '+actodotitle);
                console.log('actodocontent: '+actodocontent);
                console.log('actododate: '+actododate);
                console.log('actodoaddress: '+actodoaddress);
                console.log('actodoprivate: '+actodoprivate);

                stompClient.send("/app/upload-accomodation/" + [[${planner.tpIdx}]]+"/"+tlIdx, {},
                    JSON.stringify({'title':actodotitle, 'contents':actodocontent, 'todoDate':actododate,
                        'address':actodoaddress, 'isPrivate':actodoprivate}));

            });

        })

        //숙박투두카드 수정

        document.querySelectorAll('.actodomod').forEach(e => {
            e.addEventListener('click', ev => {

                //let tlIdx = ev.target.dataset.tlidx;
                //console.log('tlIdx: '+tlIdx);
                let tdIdx = ev.target.dataset.tdidx;
                console.log('tdIdx: '+tdIdx);

                let actodoIdx = document.getElementById('tdidx'+tdIdx).value;
                let actodotitle = document.getElementById('actodotitlemod'+tdIdx).value;
                let actodocontent = document.getElementById('actodocontentmod'+tdIdx).value;
                let actododate = document.getElementById('actododatemod'+tdIdx).value;
                let actodoaddress = document.getElementById('actodoaddressmod'+tdIdx).value;
                let actodoprivate = document.getElementById('actodopvmod'+tdIdx).checked;

                console.log('actodoIdx: '+actodoIdx);
                console.log('actodotitle: '+actodotitle);
                console.log('actodocontent: '+actodocontent);
                console.log('actododate: '+actododate);
                console.log('actodoaddress: '+actodoaddress);
                console.log('actodoprivate: '+actodoprivate);

                stompClient.send("/app/modify-accomodation/" + [[${planner.tpIdx}]], {},
                    JSON.stringify({'tdIdx':actodoIdx, 'title':actodotitle, 'contents':actodocontent, 'todoDate':actododate,
                        'address':actodoaddress, 'isPrivate':actodoprivate}));

            });

        })

        //숙박투두카드 삭제

        document.querySelectorAll('.actododel').forEach(e => {
            e.addEventListener('click', ev => {

                let tdIdx = ev.target.dataset.tdidx;
                console.log('tdIdx: '+tdIdx);

                let actodoIdx = document.getElementById('tdidx'+tdIdx).value;

                console.log('actodoIdx: '+actodoIdx);

                stompClient.send("/app/remove-accomodation/" + [[${planner.tpIdx}]], {},
                    JSON.stringify({'tdIdx':actodoIdx }));

            });

        })

        //관광지투두카드 추가

        document.querySelectorAll('.attodoadd').forEach(e => {
            e.addEventListener('click', ev => {

                let tlIdx = ev.target.dataset.tlidx;
                console.log('tlIdx: '+tlIdx);

                let todolistIdx = document.getElementById('tlidx'+tlIdx).value;
                let attodotitle = document.getElementById('attodotitleadd'+tlIdx).value;
                let attodocontent = document.getElementById('attodocontentadd'+tlIdx).value;
                let attododate = document.getElementById('attododateadd'+tlIdx).value;
                let attodoinfo = document.getElementById('attodoinfoadd'+tlIdx).value;
                let attodoprivate = document.getElementById('attodopvadd'+tlIdx).checked;

                console.log('todolistIdx: '+todolistIdx);
                console.log('attodotitle: '+attodotitle);
                console.log('attodocontent: '+attodocontent);
                console.log('attododate: '+attododate);
                console.log('attodoinfo: '+attodoinfo);
                console.log('attodoprivate: '+attodoprivate);

                stompClient.send("/app/upload-attractions/" + [[${planner.tpIdx}]]+"/"+tlIdx, {},
                    JSON.stringify({'title':attodotitle, 'contents':attodocontent, 'todoDate':attododate,
                        'attractions':attodoinfo, 'isPrivate':attodoprivate}));

            });

        })

        //관광지투두카드 수정

        document.querySelectorAll('.attodomod').forEach(e => {
            e.addEventListener('click', ev => {

                let tdIdx = ev.target.dataset.tdidx;
                console.log('tdIdx: '+tdIdx);

                let attodoIdx = document.getElementById('tdidx'+tdIdx).value;
                let attodotitle = document.getElementById('attodotitlemod'+tdIdx).value;
                let attodocontent = document.getElementById('attodocontentmod'+tdIdx).value;
                let attododate = document.getElementById('attododatemod'+tdIdx).value;
                let attodoinfo = document.getElementById('attodoinfomod'+tdIdx).value;
                let attodoprivate = document.getElementById('attodopvmod'+tdIdx).checked;

                console.log('attodoIdx: '+attodoIdx);
                console.log('attodotitle: '+attodotitle);
                console.log('attodocontent: '+attodocontent);
                console.log('attododate: '+attododate);
                console.log('attodoinfo: '+attodoinfo);
                console.log('attodoprivate: '+attodoprivate);

                stompClient.send("/app/modify-attractions/" + [[${planner.tpIdx}]], {},
                    JSON.stringify({'tdIdx':attodoIdx, 'title':attodotitle, 'contents':attodocontent, 'todoDate':attododate,
                        'attractions':attodoinfo, 'isPrivate':attodoprivate}));

            });

        })

        //관광지투두카드 삭제

        document.querySelectorAll('.attododel').forEach(e => {
            e.addEventListener('click', ev => {

                let tdIdx = ev.target.dataset.tdidx;
                console.log('tdIdx: '+tdIdx);

                let attodoIdx = document.getElementById('tdidx'+tdIdx).value;

                console.log('attodoIdx: '+attodoIdx);

                stompClient.send("/app/remove-attractions/" + [[${planner.tpIdx}]], {},
                    JSON.stringify({'tdIdx':attodoIdx }));

            });

        })

        //예산투두카드 추가

        document.querySelectorAll('.bgtodoadd').forEach(e => {
            e.addEventListener('click', ev => {

                let tlIdx = ev.target.dataset.tlidx;
                console.log('tlIdx: '+tlIdx);

                let todolistIdx = document.getElementById('tlidx'+tlIdx).value;
                let bgtodotitle = document.getElementById('bgtodotitleadd'+tlIdx).value;
                let bgtodocontent = document.getElementById('bgtodocontentadd'+tlIdx).value;
                let bgtododate = document.getElementById('bgtododateadd'+tlIdx).value;
                let bgtodomoney = document.getElementById('bgtodomoneyadd'+tlIdx).value;
                let bgtodotype = document.getElementById('bgtodotypeadd'+tlIdx).value;
                let bgtodoprivate = document.getElementById('bgtodopvadd'+tlIdx).checked;

                console.log('todolistIdx: '+todolistIdx);
                console.log('bgtodotitle: '+bgtodotitle);
                console.log('bgtodocontent: '+bgtodocontent);
                console.log('bgtododate: '+bgtododate);
                console.log('bgtodomoney: '+bgtodomoney);
                console.log('bgtodotype: '+bgtodotype);
                console.log('bgtodoprivate: '+bgtodoprivate);

                stompClient.send("/app/upload-budget/" + [[${planner.tpIdx}]]+"/"+tlIdx, {},
                    JSON.stringify({'title':bgtodotitle, 'contents':bgtodocontent, 'todoDate':bgtododate,
                        'budget':bgtodomoney, 'budgetType':bgtodotype, 'isPrivate':bgtodoprivate}));

            });

        })

        //예산투두카드 수정

        document.querySelectorAll('.bgtodomod').forEach(e => {
            e.addEventListener('click', ev => {

                let tdIdx = ev.target.dataset.tdidx;
                console.log('tdIdx: '+tdIdx);

                let bgtodoIdx = document.getElementById('tdidx'+tdIdx).value;
                let bgtodotitle = document.getElementById('bgtodotitlemod'+tdIdx).value;
                let bgtodocontent = document.getElementById('bgtodocontentmod'+tdIdx).value;
                let bgtododate = document.getElementById('bgtododatemod'+tdIdx).value;
                let bgtodomoney = document.getElementById('bgtodomoneymod'+tdIdx).value;
                let bgtodotype = document.getElementById('bgtodotypemod'+tdIdx).value;
                let bgtodoprivate = document.getElementById('bgtodopvmod'+tdIdx).checked;

                console.log('bgtodoIdx: '+bgtodoIdx);
                console.log('bgtodotitle: '+bgtodotitle);
                console.log('bgtodocontent: '+bgtodocontent);
                console.log('bgtododate: '+bgtododate);
                console.log('bgtodomoney: '+bgtodomoney);
                console.log('bgtodotype: '+bgtodotype);
                console.log('bgtodoprivate: '+bgtodoprivate);

                stompClient.send("/app/modify-budget/" + [[${planner.tpIdx}]], {},
                    JSON.stringify({'tdIdx':bgtodoIdx, 'title':bgtodotitle, 'contents':bgtodocontent, 'todoDate':bgtododate,
                        'budget':bgtodomoney, 'budgetType':bgtodotype, 'isPrivate':bgtodoprivate}));

            });

        })

        //예산투두카드 삭제

        document.querySelectorAll('.bgtododel').forEach(e => {
            e.addEventListener('click', ev => {

                let tdIdx = ev.target.dataset.tdidx;
                console.log('tdIdx: '+tdIdx);

                let bgtodoIdx = document.getElementById('tdidx'+tdIdx).value;

                console.log('bgtodoIdx: '+bgtodoIdx);

                stompClient.send("/app/remove-budget/" + [[${planner.tpIdx}]], {},
                    JSON.stringify({'tdIdx':bgtodoIdx }));

            });


        })

        //일반투두카드 추가

        document.querySelectorAll('.gntodoadd').forEach(e => {
            e.addEventListener('click', ev => {

                let tlIdx = ev.target.dataset.tlidx;
                console.log('tlIdx: '+tlIdx);

                let todolistIdx = document.getElementById('tlidx'+tlIdx).value;
                let gntodotitle = document.getElementById('gntodotitleadd'+tlIdx).value;
                let gntodocontent = document.getElementById('gntodocontentadd'+tlIdx).value;
                let gntododate = document.getElementById('gntododateadd'+tlIdx).value;
                let gntodoaddress = document.getElementById('gntodoaddressadd'+tlIdx).value;
                let gntodoprivate = document.getElementById('gntodopvadd'+tlIdx).checked;

                console.log('todolistIdx: '+todolistIdx);
                console.log('gntodotitle: '+gntodotitle);
                console.log('gntodocontent: '+gntodocontent);
                console.log('gntododate: '+gntododate);
                console.log('gntodoaddress: '+gntodoaddress);
                console.log('gntodoprivate: '+gntodoprivate);

                stompClient.send("/app/upload-general/" + [[${planner.tpIdx}]]+"/"+tlIdx, {},
                    JSON.stringify({'title':gntodotitle, 'contents':gntodocontent, 'todoDate':gntododate,
                        'address':gntodoaddress, 'isPrivate':gntodoprivate}));

            });

        })

        //일반투두카드 수정

        document.querySelectorAll('.gntodomod').forEach(e => {
            e.addEventListener('click', ev => {

                let tdIdx = ev.target.dataset.tdidx;
                console.log('tdIdx: '+tdIdx);

                let gntodoIdx = document.getElementById('tdidx'+tdIdx).value;
                let gntodotitle = document.getElementById('gntodotitlemod'+tdIdx).value;
                let gntodocontent = document.getElementById('gntodocontentmod'+tdIdx).value;
                let gntododate = document.getElementById('gntododatemod'+tdIdx).value;
                let gntodoaddress = document.getElementById('gntodoaddressmod'+tdIdx).value;
                let gntodoprivate = document.getElementById('gntodopvmod'+tdIdx).checked;

                console.log('gntodoIdx: '+gntodoIdx);
                console.log('gntodotitle: '+gntodotitle);
                console.log('gntodocontent: '+gntodocontent);
                console.log('gntododate: '+gntododate);
                console.log('gntodoaddress: '+gntodoaddress);
                console.log('gntodoprivate: '+gntodoprivate);

                stompClient.send("/app/modify-general/" + [[${planner.tpIdx}]], {},
                    JSON.stringify({'tdIdx':gntodoIdx, 'title':gntodotitle, 'contents':gntodocontent, 'todoDate':gntododate,
                        'address':gntodoaddress, 'isPrivate':gntodoprivate}));

            });

        })

        //일반투두카드 삭제

        document.querySelectorAll('.gntododel').forEach(e => {
            e.addEventListener('click', ev => {

                let tdIdx = ev.target.dataset.tdidx;
                console.log('tdIdx: '+tdIdx);

                let gntodoIdx = document.getElementById('tdidx'+tdIdx).value;

                console.log('gntodoIdx: '+gntodoIdx);

                stompClient.send("/app/remove-general/" + [[${planner.tpIdx}]], {},
                    JSON.stringify({'tdIdx':gntodoIdx }));

            });

        })

        //교통투두카드 추가

        document.querySelectorAll('.trtodoadd').forEach(e => {
            e.addEventListener('click', ev => {

                let tlIdx = ev.target.dataset.tlidx;
                console.log('tlIdx: '+tlIdx);

                let todolistIdx = document.getElementById('tlidx'+tlIdx).value;
                let trtodotitle = document.getElementById('trtodotitleadd'+tlIdx).value;
                let trtodocontent = document.getElementById('trtodocontentadd'+tlIdx).value;
                let trtododate = document.getElementById('trtododateadd'+tlIdx).value;
                let trtodotype = document.getElementById('trtodotypeadd'+tlIdx).value;
                let trtodoprivate = document.getElementById('trtodopvadd'+tlIdx).checked;

                console.log('todolistIdx: '+todolistIdx);
                console.log('trtodotitle: '+trtodotitle);
                console.log('trtodocontent: '+trtodocontent);
                console.log('trtododate: '+trtododate);
                console.log('trtodotype: '+trtodotype);
                console.log('trtodoprivate: '+trtodoprivate);

                stompClient.send("/app/upload-transport/" + [[${planner.tpIdx}]]+"/"+tlIdx, {},
                    JSON.stringify({'title':trtodotitle, 'contents':trtodocontent, 'todoDate':trtododate,
                        'transportType':trtodotype, 'isPrivate':trtodoprivate}));

            });

        })

        //교통투두카드 수정

        document.querySelectorAll('.trtodomod').forEach(e => {
            e.addEventListener('click', ev => {

                let tdIdx = ev.target.dataset.tdidx;
                console.log('tdIdx: '+tdIdx);

                let trtodoIdx = document.getElementById('tdidx'+tdIdx).value;
                let trtodotitle = document.getElementById('trtodotitlemod'+tdIdx).value;
                let trtodocontent = document.getElementById('trtodocontentmod'+tdIdx).value;
                let trtododate = document.getElementById('trtododatemod'+tdIdx).value;
                let trtodotype = document.getElementById('trtodotypemod'+tdIdx).value;
                let trtodoprivate = document.getElementById('trtodopvmod'+tdIdx).checked;

                console.log('trtodoIdx: '+trtodoIdx);
                console.log('trtodotitle: '+trtodotitle);
                console.log('trtodocontent: '+trtodocontent);
                console.log('trtododate: '+trtododate);
                console.log('trtodotype: '+trtodotype);
                console.log('trtodoprivate: '+trtodoprivate);

                stompClient.send("/app/modify-transport/" + [[${planner.tpIdx}]], {},
                    JSON.stringify({'tdIdx':trtodoIdx, 'title':trtodotitle, 'contents':trtodocontent, 'todoDate':trtododate,
                        'transportType':trtodotype, 'isPrivate':trtodoprivate}));

            });

        })

        //교통투두카드 삭제
        document.querySelectorAll('.trtododel').forEach(e => {

            e.addEventListener('click', ev => {

                let tdIdx = ev.target.dataset.tdidx;
                console.log('tdIdx: '+tdIdx);

                let trtodoIdx = document.getElementById('tdidx'+tdIdx).value;

                console.log('trtodoIdx: '+trtodoIdx);

                stompClient.send("/app/remove-transport/" + [[${planner.tpIdx}]], {},
                    JSON.stringify({'tdIdx':trtodoIdx }));

            });
        })

        /* [end] 웹소켓 ============================================================================================== */

        connect();
    </script>
    <!--<span>공유 인원 목록</span>
        <ol>

            <li th:each="group : ${planner.travelGroup.participants}">
              <p th:text="${group.member.userId}">

             </li>

             &lt;!&ndash;  <form th:action="@{/planner/add-group}" method="post" >
              <input type="text" th:value="group1B" name="newUserId"/>
                <input type="hidden" th:value="${planner.tpIdx}" name="tpIdx"/>
                <button><span>공유 인원 추가</span></button>
            </form>
            &ndash;&gt;
        </ol>
                <div id="addGroupResponse"></div>
                <input type="text" th:value="group1B" name="newUserId" id ="newUser"/>
                <button onclick="addGroup()"><span>공유 인원 추가</span></button>
    </div>

    <div class="article_content">
        <pre>[[${planner.title}]]</pre>
    </div>
    <div class="btn_section">

        <button onclick="location.href='/planner/list'"><span>목록으로 돌아가기</span></button>


    </div>
    <br>
    <br>-->

</div>
</body>
</html>